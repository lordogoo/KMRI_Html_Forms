<htmlform>

<!--
Pediatric 6-Months Form
==============================================================
Javascript helper functions taken from the HTML Form Entry Javascript Reference at 
https://wiki.openmrs.org/display/docs/HTML+Form+Entry+JavaScript+Reference 
==============================================================

This form is used to process 6 month old babies and to store important information pertaining to
their health, nutrition, and development. It is assumed that this is not the babies first visit 
and that the babies growth statistics will be recorded elsewhere.

The main template form is the pediatric followup form. This means that the majority of this 
form was built of the pediatric followup form such that if there is information that isnt 
designated to have come from somewhere else then it comes from the pediatric followup form.
-->

<script type="text/javascript">

        function isBlank(listValueString,numListElements,allBlank) {
                var numCheck = 1;
                if (allBlank) {numCheck = numListElements};
                var thisListValueString = listValueString;
                if (numListElements > 1) {
                    thisListValueString = thisListValueString + "_1";
                };
                var i = 1;
                while (numCheck >= i) {
                         if (getValue(thisListValueString) != '' ) {
                            return false;
                         };
                         i++;
                         thisListValueString = listValueString + "_" + i;
                };
                return true;                      
        };

        function removeBlanks(startRow,numberRows,listValueString,numListElements,allBlank) {
                //
                //function shuffles all non-blank rows from array item start to start+number-1 to the beginning
                // startRow is the first row in the array 
                // numberRows is the number of rows in this block
                // numListElements is the number of elements in each row
                // if numListElements is more than one allBlank TRUE means to ensure all elements are blank otherwise checks just the first
                //
           
                var i = startRow;
                var nonBlankCount = 0;
                var lastRow = startRow +numberRows - 1;
                var baseListValueString = listValueString;
                if (numListElements > 1) {
                    baseListValueString = baseListValueString + "_1";
                };

                while (lastRow >= i) {
                  
                      // keep going if nonblank 
                      if (!isBlank((i+listValueString),numListElements,allBlank)) {
                          i++;
                          nonBlankCount ++;
                      } else {
                          // found blank line, find next non-blank 
                             var j = i + 1;
                             while ((lastRow >= j) &amp;&amp; (isBlank((j+listValueString),numListElements,allBlank))) {
                                   j++;
                             };
                             // if we have found a nonblank, move the nonblanks down
                             var newStart = j;
                             while (!isBlank((j+listValueString),numListElements,allBlank) &amp;&amp; (lastRow >= j)) {
                                 //move all of the elements in this row
                                 for (k=1; numListElements >=k; k++) {
                                       var thisListElement = listValueString + "_" + k;
                                       if ( (k==1) &amp;&amp; (numListElements == 1) ) {
                                             thisListElement = listValueString;
                                       };
                                       var moveValuestring = getValue(j + thisListElement);
                                       setValue(i + thisListElement, moveValuestring);
                                       setValue(j + thisListElement,'');
                                 };
                                 nonBlankCount++;
                                 i++;
                                 j++;                               
                             };   
                             if (j > lastRow) {
                                i = j;
                             };                            
                      };                
                };
                return nonBlankCount;
        };   //end function       

        function displayRows(countConcept,countConceptValue,startRow) {
                //
                // find the count of the number of surgeries that exist
                //      
        var addedCount = $j(countConcept).html(); 
                var regex = /(&lt;([^>]+)>)/ig;
        if (addedCount != null){
                var addedInt = addedCount.replace(regex, "");
            addedCount = Number(addedInt);
        };
                //set to the first if there are none added so far
        if (addedCount == null || addedCount == '' || addedCount== 0){
                        // if we are in edit mode need to get count a different way
                        addedCount = getValue(countConceptValue);
                        if (addedCount == 0) {
                            addedCount = 1;
                        };
        };
                // make sure all of the ones we have display    
        for(i=1; addedCount>=i; i++){
                        var rowNumber = startRow + i - 1;
            var dynString = "#" + rowNumber + "-toggleContainer";
            $j(dynString).show();
        };

                //
                // click for the number of entries that exist so that they show up
                //
        for(i=1; addedCount>i; i++){
                  rowNumber = startRow + i - 1;     
                      dynString = "#" + rowNumber + "-addEntry";
              $j(dynString).click();                
        };
       }

    if(jQuery){

        $j(document).ready(function(){
                                //don't need an add button on the 44 entry because they can only add 44
                $j('#44-addEntry').remove();
                                $j('#1-removeEntry').remove();

                               //don't need a button on 54 surgeries because they can only add 10
                $j('#54-addEntry').remove();
  $j('#45-removeEntry').remove();

                               //This one is for referrals
  $j('#101-removeEntry').remove();
                $j('#110-addEntry').remove();


  $j('#201-removeEntry').remove();
                $j('#210-addEntry').remove();

  $j('#401-removeEntry').remove();
                $j('#410-addEntry').remove();

  $j('#301-removeEntry').remove();
                $j('#310-addEntry').remove();

  $j('#501-removeEntry').remove();
                $j('#510-addEntry').remove();



                               });



$j(document).ready(function(){
  $j('button.addEntry').live("click", function(){

    var rowNumber = parseFloat(this.id);

    var listValueString = '-list.value';
    if (rowNumber > 44) {
        listValueString = '-list.value_1';
    }

 valuestring = parseFloat(this.id) + listValueString;
                                        //the second element of this or fails so if it makes it through the first 
                                        //the form crashes - left it here in case there's a case where this is nec
                    if (getValue(valuestring) != '' ){
                 var correctedAddButtonId = parseFloat(this.id) + 1;

                                            // determine the right count to update
                                          if ((this.id > 500)) {
                                                valuestring = 'addedRadCount.value';
                                            } else if ((this.id > 400)) {
                                                valuestring = 'addedDiagCount.value';
                                            } else if ((this.id > 300)) {
                                                valuestring = 'addedUsCount.value';
                                            } else if (this.id > 200) {
 valuestring='addedLabsCount.value';
} else if ((this.id > 100)) {
                                                valuestring = 'addedReferralsCount.value';
                                            } else if (this.id > 44) {
                                                valuestring = 'addedSurgeryCount.value';
                                            } else {
                                                valuestring = 'addedDiagnosisCount.value';
                                            };

                                            //once we have the right count string, get the current count and increment if we have added
                                            var currentCount = getValue(valuestring);
                                            if (correctedAddButtonId>currentCount){
                                                currentCount = correctedAddButtonId;
                                                setValue(valuestring, currentCount);
                                            };

                                             // turn on the next button, toggle off the previous and turn on the remove button on this one 
                             var contentAddId = "#" + correctedAddButtonId + "-toggleContainer";
                         $j(contentAddId).toggle(true);
                         $j('#' + this.id).toggle(false);
                                             $j('#' + parseFloat(this.id) + '-removeEntry').toggle(false);
                    }

                                        return false;
  });
});

                        $j(document).ready(function(){
                $j('button.removeEntry').live("click", function(){
                    var correctedRemoveButtonId = parseFloat(this.id) - 1;

                                        // update the right count - 1 - 44 reportable diagnoses 45 -54 surgery

                                           if (correctedRemoveButtonId > 500) {
                                           setValue('addedRadCount.value', Number(getValue('addedRadCount.value')) -1);

                                        }  else   if (correctedRemoveButtonId > 400) {
                                           setValue('addedDiagCount.value', Number(getValue('addedDiagCount.value')) -1);

                                        }  else   if (correctedRemoveButtonId > 300) {
                                           setValue('addedUsCount.value', Number(getValue('addedUsCount.value')) -1);

                                        } else   if (correctedRemoveButtonId > 200) {
                                           setValue('addedLabsCount.value', Number(getValue('addedLabsCount.value')) -1);

                                        } else  if (correctedRemoveButtonId > 100) {
                                           setValue('addedReferralsCount.value', Number(getValue('addedReferralsCount.value')) -1);

                                        } else if (correctedRemoveButtonId > 44) {
                                             setValue('addedSurgeryCount.value', Number(getValue('addedSurgeryCount.value')) - 1);

                                        } else {
                                          setValue('addedDiagnosisCount.value', Number(getValue('addedDiagnosisCount.value')) - 1);
                                        };
                    var contentAddId = "#" + parseFloat(this.id) + "-toggleContainer";
                    $j(contentAddId).toggle(false);
                    $j( ':input:not(:button)', contentAddId).val([]);

                         $j('#' + correctedRemoveButtonId + '-addEntry').toggle(true); 
                                        $j('#' + correctedRemoveButtonId + '-removeEntry').toggle(true);
                    return false;
                    });
                });
        beforeSubmit.push(function(){

            var dateStr;
            var now;
            var then;

            dateStr = getValue("nextappointmentdate.value");

            if (dateStr == null || dateStr == "")
                return true;

            now = new Date();
            then = new Date(getValue("nextappointmentdate.value"));

            if (now > then) {
                alert("The next scheduled appointment cannot be past today.");
                return false;
            }

            return true;
        });
function isEmptyField(id)
    {
        var value=getValue(id+".value");
        if (value=='' || value==null)
            return true;
        return false;
    }
    function fieldHasValue(id,testValue)
    {
        var value=getValue(id+".value");
        if (value==testValue)
            return true;
        return false;
    }

    beforeSubmit.push(function()
    {
        if (fieldHasValue("PC_symptomatic",5006))
        {
            if(isEmptyField("PC_chiefComplaint")==false)
            {
                alert ("You have selected 'Feeling Well' under Presenting Complaint, but also chose a Complaint");
                return false;
            }
        }
        if (fieldHasValue("PC_symptomatic",1068))
        {
            if(isEmptyField("PC_chiefComplaint"))
            {
                alert ("You have selected 'Having Symptoms' under Presenting Complaint, but have not chosen a Complaint");
                return false;
            }
        }
        if (isEmptyField("GENERAL_weightGain")==false) 
        {
            if(isEmptyField("GENERAL_weightLoss")==false)
            {
                alert ("You cannot select both weight gain and weight loss.");
                return false;       
            }
        }
        if (isEmptyField("GENERAL_hivStatus"))
        {
            alert ("HIV Status cannot be null. Please enter a value to proceed.");
            return false;   
        }
        if (isEmptyField("GENERAL_hivStatus_mother"))
        {
            alert ("Mother's HIV Status cannot be null. Please enter a value to proceed.");
            return false;   
        }
        if (isEmptyField("TB_suspicion"))
        {
            alert ("TB Status cannot be null. Please enter a value to proceed.");
            return false;   
        }
        
        // remove blank lines on submit
        // it also resets the number of rows to only nonblanks
        setValue('addedDiagnosisCount.value', removeBlanks(1,44,"-list.value",1,false));
        setValue('addedSurgeryCount.value', removeBlanks(45,10,"-list.value",2,false));
        setValue('addedReferralsCount.value', removeBlanks(101,10,"-list.value",2,false));
        setValue('addedLabsCount.value', removeBlanks(201,10,"-list.value",1,false));
        setValue('addedDiagCount.value', removeBlanks(401,10,"-list.value",1,false));
        setValue('addedRadCount.value', removeBlanks(501,10,"-list.value",1,false));
        setValue('addedUsCount.value', removeBlanks(301,10,"-list.value",1,false));
        return true;
    });
     
    
		<!-- this function formats sections of code such that portions can be enabled and disabled via a check box while also formatting nicely -->
        $j(document).ready(function(){
                if ( $j.browser.msie ) {
                $j(":checkbox").click(function(){
                    $j(this).change();
                    });
                }
                $j(".enableDisable").each(function(){
                    var group = $j(this);
                    function disableFn(){
                    group.children("#disabled").fadeTo(250,0.33);
                    group.children("#disabled").find(":checkbox").attr("checked",false); //uncheck
                    group.children("#disabled").find("input[type$='text']").val("");
                    group.children("#disabled").find("textarea").val("");
                    group.children("#disabled").find("select").val(0);
                    group.children("#disabled").find("input").attr("disabled",true);  //disable
                    group.children("#disabled").find("textarea").attr("disabled",true);
                    group.children("#disabled").find("select").attr("disabled",true);
                    }
                    function enableFn(){
                    group.children("#disabled").fadeTo(250,1);
                    group.children("#disabled").find("input").attr("disabled",false);
                    group.children("#disabled").find("select").attr("disabled",false);
                    group.children("#disabled").find("textarea").attr("disabled",false);
                    }
                    <ifMode mode="ENTER" include="true">
                        disableFn();
                    </ifMode>

                    $j(this).children("#trigger").find(":checkbox:first").change(function(){
                        var checked = $j(this).attr("checked");
                        if(checked == true){
                        enableFn();
                        }else{
                                                disableFn();
                        }
                        });
                });

                $j(".checkboxGroup").each(function(){
                        var group = $j(this);
                        var uncheckAll = function(){
                        group.find("input[type$='checkbox']").attr("checked",false);
                        group.find("input[type$='checkbox']").change();
                        }
                        var uncheckRadioAndAll = function(){
                        group.find("#checkboxAll,#checkboxRadio").find("input[type$='checkbox']").attr("checked",false);
                        group.find("#checkboxAll,#checkboxRadio").find("input[type$='checkbox']").change();
                        }

                        group.find("#checkboxAll").find("input").click(
                            function(){
                            var flip;
                            var checked = $j(this).siblings(":checkbox:first").attr("checked");
                            if($j(this).attr("name") == $j(this).parents("#checkboxAll:first").find(":checkbox:first").attr("name")){
                            checked = $j(this).attr("checked");
                            flip = checked;
                            }else{
                            flip = !checked;
                            }
                            if($j(this).attr("type") == "text") if(flip == false) flip = !flip; // this is so the user doesn't go to check the checkbox, then uncheck it when they 
                            uncheckAll();
                            $j(this).parents("#checkboxAll:first").find(":checkbox").attr("checked",flip);
                            $j(this).parents("#checkboxAll:first").find(":checkbox").change();
                            }
                            );

                        group.find("#checkboxRadio").find("input[type$='checkbox']").click(function(){
                                uncheckAll();
                                $j(this).siblings("input[type$='checkbox']").attr("checked",false);
                                $j(this).attr("checked",true);
                                $j(this).change();
                                });

                        group.find("#checkboxCheckbox").click(
                                function(){
                                uncheckRadioAndAll();
                                }
                                );
                });
        <!-- makes sure that obs tags with the id="normal" attribute will have a "Normal" label after. 
		Without this function if the concept in the database is a boolean the label wont display 
		properly without this code -->
		$j('span#normal').find('label').append("Normal");
		<!-- makes sure that obs tags with the id="abnormal" attribute will have a "Abormal" label after. 
		Without this function if the concept in the database is a boolean the label wont display 
		properly without this code. This is especially jarring when a comments field is added because
		The label cannot be manually added without using the below code-->
		<!-- also note that it was hard to tell if the abnormal label was part of the the comments label.
		the pre tag was added to separate them -->
		$j('span#abnormal').find('label').append("Abnormal<pre>     </pre>");
		$j('span#abnormalspace').find('label').append("<pre>     </pre>");
		});
    }

</script>

<script type="text/javascript">
    function openGrowthChart() {
        var id ="<lookup expression="patient.patientId"/>";
        window.open('../growthchart/growthChart.htm?patientId=' + id, 'summaryWindow', 'toolbar=no,width=660,height=600,resizable=yes,scrollbars=yes').focus();
    }
</script>




    <macros>
    paperFormId = (Fill this in)
    headerColor =#009d8e
    fontOnHeaderColor = white
    </macros>

    <style>
        table{
			padding-left: 0px;
            padding-bottom: 0px;
			width:100%;
		}
		tr{
			padding-left: 0px;
            padding-bottom: 0px;
		}
		td{
			padding-left: 0px;
            padding-bottom: 0px;
			margin-right:auto;
			margin-left:0px
		}
		.section {
            border: 1px solid $headerColor;
            padding: 2px;
            text-align: left;
            margin-bottom: 1em;
        }
        .sectionHeader {
            background-color: $headerColor;
            color: $fontOnHeaderColor;
            display: block;
            padding: 2px;
            font-weight: bold;
        }

        .labelCol { 
            vertical-align: top;
            font-weight: bold;  
        }

        .secondary {
            padding-left: 10px;
        }
        .baseline-aligned td.label {
            text-align: right;
        }
        .right {
            float: right;
        }
        .karnofsky tr{
            width: 100%;
        }
        .karnofsky td{
            width: 50%;
        }
        .inner-table {
            width: 100%
        }
        .checkboxGroup {
            width: 100%;
        }
        #two-wide {
            width: 100%;
        }
        #two-wide tr {
            width: 100%;
        }
        #two-wide td {
            padding-left: 5px;
            padding-bottom: 5px;
            width: 50%;
            vertical-align: top;
            border: 1px solid $headerColor;
        }
        #two-wide td.enableDisable {
            border: none;
            width: auto;
            padding-right: 2px;
        }
        #two-wide td.nested-td {
            border: none;
            width: auto;
            padding-right: 2px;
        }
        #two-wide td.nested-label {
            border: none;
            width: auto;
            padding-right: 2px;
            text-align: right;
        }
		<!-- creates a box around an element to make it look visually cohesive-->
		.boarder-box{
            padding-left: 5px;
            padding-bottom: 5px;
            vertical-align: top;
            border: 1px solid $headerColor;
        }
		<!-- used to indent text -->
		.tab {
			margin-left: 40px; 
		}
		<!-- used to make comment boxes longer. note we cant make them any bigger, just longer -->
		.obs-field input[type="text"] {
			width: 300px;
			height: 40px;
			word-break: break-word;
		}
		<!-- used for formatting. needed to add empty space inline. -->
		pre{
			display: inline;
		}
        #three-wide {
            width: 100%
        }
        #three-wide tr {
            width: 100%;
        }
        #three-wide td {
            padding-left: 5px;
            width: 33%;
            vertical-align: top;
            border: 1px solid $headerColor;
        }

    </style>

    <span style="float:right">Paper Form ID: $paperFormId</span>
    <h2>Pediatric 6-Months Form (v1.0)</h2>

    <section headerLabel="Contents">
<ol>
    <li><a href="#encounter_detail"> Encounter Details </a> </li>
    <li><a href="#S2"> Presenting Complaint </a> </li>
    <li><a href="#tb_hiv"> TB and HIV </a> </li>
    <li><a href="#S3"> Nutrition </a> </li>
    <li><a href="#S4"> Review of Systems </a> </li>
    <li><a href="#S5"> Current Medications </a> </li>
    <li><a href="#S6"> Vaccinations </a> </li>
    <li><a href="#S8"> Physical Examination </a> </li>
	<li><a href="#S9"> Counselling </a> </li>
    <li><a href="#Referrals"> Referrals </a></li>
    <li><a href="#S11"> Impressions </a> </li>
</ol>
</section>
<section headerLabel="Encounter Details">
        <script type="text/javascript">
            $j(document).ready(function(){
                <ifMode mode="ENTER">
                    $j("#date_div_showed").append($j("#date_div_hidden").find("input").clone().val());
                    $j("#location_div_showed").append($j("#location_div_hidden").find("select option:selected").clone().text());
                    $j("#provider_div_showed").append($j("#provider_div_hidden").find("select option:selected").clone().text());
                </ifMode>
                <ifMode mode="EDIT">
                    $j("#date_div_showed").append($j("#date_div_hidden").find("input").clone().val());
                    $j("#location_div_showed").append($j("#location_div_hidden").find("select option:selected").clone().text());
                    $j("#provider_div_showed").append($j("#provider_div_hidden").find("select option:selected").clone().text());
                </ifMode>
                <ifMode mode="VIEW">
                    $j("#date_div_showed").append($j("#date_div_hidden").find("span").clone().text());
                    $j("#location_div_showed").append($j("#location_div_hidden").find("span").clone().text());
                    $j("#provider_div_showed").append($j("#provider_div_hidden").find("span").clone().text());
                </ifMode>
                $j("#location_div_hidden").hide();
                $j("#provider_div_hidden").hide();
                $j("#date_div_hidden").hide();
                //$j("#table_encounterDetails").find("input").attr("disabled",true);
                //$j("#table_encounterDetails").find("select").attr("disabled",true);
            });
        </script>
    <span id="encounter_details" />
    <table style="width:auto;" id="table_encounterDetails" >
        <tr>
            <td class="label">Date:</td>
            <td>
                <div id="date_div_hidden">
                    <encounterDate default="now" showTime="true"/>
                </div>
                <div id="date_div_showed">
                </div>
            </td>
        </tr>
        <tr>
            <td class="label">Location:</td>
            <td>
                <div id="location_div_hidden">
                    <encounterLocation default="UserProperty:defaultLocation" order="UserProperty:defaultLocation"/>
                </div>
                <div id="location_div_showed">
                </div>
            </td>
        </tr>
        <tr>
            <td class="label">Provider:</td>
            <td>
                <div id="provider_div_hidden">
                    <encounterProvider default="currentUser" order="currentUser"/>
                </div>
                <div id="provider_div_showed">
                </div>
            </td>
        </tr>
    </table>
</section>
    <span id="S2">
    <section headerLabel="Presenting Complaint">
    <table>
        <tr>
            <td style="padding-left:5px; padding-top:10px;">
                <obs field="PC_symptomatic" id="PC_symptomatic" conceptId="5219" answerConceptIds="5006,1068" answerLabels="Feeling well,Having symptoms" style="radio"/>
                <br/>
                Chief Complaint: <obs field="PC_chiefComplaint" id="PC_chiefComplaint" conceptId="5219" answerClasses="Chief Complaint" />
                <br/>

                Comments: 
                <div class="secondary"><obs field="PC_comments" id="PC_comments" conceptId="161011" style="textarea" rows="8" cols="75"/></div>
            </td>
        </tr>
    </table>
    </section>
</span>

<span id="tb_hiv">
    <section headerLabel="TB and HIV">
        <table id="two-wide">
            <tr>
                <td style="width:50%;">
                    <h4>HIV status:</h4>
                    <table class="inner-table">
                        <tr>
                            <td class="nested-td">
                                <obs field="GENERAL_hivStatus" id="GENERAL_hivStatus" conceptId="1169" labelText="HIV status: "  answerConceptIds="703,664,1067" answerLabels="Positive,Negative,Unknown" required="true"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="nested-td">
                                <obs field="GENERAL_hivStatus_mother" id="GENERAL_hivStatus_mother" conceptId="1396" labelText="Mother's HIV status: " answerConceptIds="703,664,1067" answerLabels="Positive,Negative,Unknown" required="true"/>
                            </td>
                        </tr>
                    </table>
                </td>
                <td>
                    <h4>Tuberculosis Status:</h4>
                    <table class="checkboxGroup">
                        <tr> 
                            <td class="nested-td">
                                TB Status:<obs field="TB_suspicion" id="TB_suspicion" conceptId="1659" answerConceptIds="1660,142177,1661" answerLabels="No signs or symptoms,Disease suspected,Disease diagnosed" style="dropdown" required="true"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="nested-td">
                                Treatment status: <obs field="TB_status" conceptId="1659" answerConceptIds="1270,1663,1662,1107,160332,160330" answerLabels="Start Treatment,Treatment completed,Treatment in progress,No treatment, Failed first treatment, Failed second treatment" style="dropdown"/>
                            </td>
                            <td class="nested-td">
                                <obs field="TB_treatmentyear" id="TB_treatmentyear"  conceptId="161011" labelText="Details:"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="nested-td">
                                <obs field="TB_contact" conceptId="124068" answerConceptId="1065" style="checkbox" answerLabel="Tuberculosis contact in household"/> 
                            </td>
                        </tr>
                        <tr>
                            <td class="nested-td">
                                <div class="enableDisable">
                                    <div id="trigger">
                                        <obs field="TB_pc" conceptId="1628" answerConceptId="5957" answerLabel="Productive cough" style="checkbox"/> 
                                    </div>
                                    <div id="disabled" class="secondary">
                                        <obs field="TB_hemo" conceptId="1628" answerConceptId="138905" answerLabel="Hemoptysis" style="checkbox"/> 
                                        <br/>
                                        <obs field="TB_sputum" conceptId="1628" answerConceptId="125998" answerLabel="Sputum" style="checkbox"/> 
                                    </div> 
                                </div>
                            </td>
                            <td class="nested-td">
                                <obs field="TB_chronic" conceptId="1628" answerConceptId="145455" answerLabel="Chronic cough (longer than 3 weeks)" style="checkbox"/>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </section>
</span>
<span id="S3">
<!-- this is a new section added to asses the nutrition and feeding methods of the 6-month baby -->
<section headerLabel="Nutrition">
		<table>
		<col width="40%"/>
		<col width="60%"/>
                      <tr>
                               <td>Method of Feeding: <obs field="Nutrition_feedingmethod" conceptId="1151" id="Method of Feeding" answerConceptIds="1173,5254,1150,6046,5526,968,1595" /></td>
                      </tr>
                      <tr>
                               <td colspan="2">Frequency: <obs field="Nutrition_feedingfrequenct" conceptId="162060" id="Frequency of Feeding" /> Number of times per day </td>
                      </tr>
                      <tr>
                               <td colspan="2">Volume: <obs field="Nutrition_feedingvolume" conceptId="162061" id="Volume of Feeding" />ML Per Feed</td>
                      </tr>
                      <tr>
                               <td colspan="2">Duration: <obs field="Nutrition_feedingduration" conceptId="162062" id="Duration of Feeding" />Min Per Feed</td>
                      </tr>
					  <tr>
								<td colspan="2">(Note: recommended intake is 750-1000mL of milk per day)</td>
					  </tr>
					  <tr><td><br/></td></tr>
					  <tr>
                               <td>If breastfeeding, Vitamin D supplementation (400-800 IU)? </td><td><obs field="Nutrition_feedingvd" conceptId="162159" style="yes_no"/></td>
                      </tr>
                      <tr>
                               <td>If formula feeding, iron-fortified formula? </td><td><obs field="Nutrition_feedingiron" conceptId="162158" style="yes_no"/></td>
                      </tr>
                      <tr>
                               <td>Introduction of Solids? </td><td><obs field="Nutrition_feedingsolids" conceptId="162157" style="yes_no"/> </td>
                      </tr>
                      <tr>
                               <td>Iron-rich Solids? </td><td><obs field="Nutrition_feedingironsolids" conceptId="162156" style="yes_no"/> </td>
                      </tr>
					  <tr><td><br/></td></tr>
                      <tr>
                               <td>Other Maternal Concerns:</td>
                      </tr>
                      <tr>
                               <td><obs field="Nutrition_comments" id="FP_comments" conceptId="161011" style="textarea" rows="3" cols="20" /></td>
                      </tr>
                </table>
        </section>
</span>		
<!-- this section was originally taken from the paediatric followup form but is heavily modified-->
<span id="S4">
    <section headerLabel="Review of Systems">
    <table id="two-wide">
        <tr>
            <td>
            <h4>General History: </h4>
            <table class="checkboxGroup">
                <tr id="checkboxAll">
                    <td class="nested-td">
                        <obs field="G_nc" conceptId="1069" answerConceptId="664" answerLabel="No complaints" style="checkbox"/>
                    </td>
                </tr>
                <tr id="checkboxCheckbox">

                    <td class="nested-td">
                        <obs field="G_fever" conceptId="1069" answerConceptId="153869" answerLabel="Is the child having fevers?" style="checkbox"/>			
                    </td>
		    <td class="nested-td">
                        Method of measuring fever <obs field="G_fevermethod" conceptId="160632" />
                    </td>
					
                </tr>
                <tr id="checkboxCheckbox">
                    <td class="nested-td">
                        <obs field="G_rash" conceptId="1069" answerConceptId="512" answerLabel="Rash" style="checkbox"/>
                    </td>
                </tr>
                <tr id="checkboxCheckbox">
                    <td class="nested-td">
                        <obs field="G_irr" conceptId="1069" answerConceptId="6023" answerLabel="Irritability or excessive crying" style="checkbox" />
                    </td>
				</tr>
				
				<tr id="checkboxCheckbox">
                    <td class="nested-td">
                        <obs field="G_sleepconcerns" conceptId="1069" answerConceptId="142371" answerLabel="Sleeping concerns" style="checkbox"/>
                    </td>
				</tr>
				
            </table>
            <br/>
            Comments: 
            <div class="secondary"><obs field="G_comments" id="G_comments" conceptId="161011" style="textarea" rows="5" cols="50"/></div>
        </td>
            <td class="checkboxGroup">
                <h4>HEENT: </h4>
                <table class="checkboxGroup">
                    <tr id="checkboxAll">
                        <td class="nested-td">
                            <obs field="HEENT_noComplaints" conceptId="1070" answerConceptId="664" answerLabel="No complaints" style="checkbox"/>
                        </td>
                    </tr>
                    <tr id="checkboxCheckbox">
                                                <td class="nested-td">
                            <obs field="HEENT_vd" conceptId="1070" answerConceptId="5953" answerLabel="Vision concerns" style="checkbox"/>
                        </td>
					</tr>
                    <tr id="checkboxCheckbox">
                        <td class="nested-td">
                            <obs field="HEENT_hd" conceptId="1070" answerConceptId="861" answerLabel="Hearing concerns" style="checkbox"/>
                        </td>
					</tr>
                    <tr id="checkboxCheckbox">
                        <td class="nested-td">
                            <obs field="HEENT_oto" conceptId="1070" answerConceptId="873" answerLabel="Otorrhea" style="checkbox"/>
                        </td>
                    </tr>
                    <tr id="checkboxCheckbox">
                        <td class="nested-td">
                            <obs field="HEENT_rhino" conceptId="1070" answerConceptId="115403" answerLabel="Rhinorrhea" style="checkbox"/>
                        </td>
					</tr>
                    <tr id="checkboxCheckbox">
                        <td class="nested-td">
                            <obs field="HEENT_sd" conceptId="1070" answerConceptId="5954" answerLabel="Swallowing difficulties" style="checkbox"/>
                        </td>
					</tr>
                    <tr id="checkboxCheckbox">
                        <td class="nested-td">
                            <obs field="HEENT_os" conceptId="1070" answerConceptId="5244" answerLabel="Oral Sores" style="checkbox"/>
                        </td> 
                    </tr>
                    <tr id="checkboxCheckbox">
                        <td class="nested-td">
                            <obs field="HEENT_oc" conceptId="1070" answerConceptId="5334" answerLabel="Oral Candidiasis" style="checkbox"/>
                        </td>
                    </tr>
            </table>
            <br/>
            Comments: 
            <div class="secondary"><obs field="HEENT_comments" id="HEENT_comments" conceptId="161011" style="textarea" rows="5" cols="50"/></div>
        </td>
    </tr>
    <tr>
	        <td>
                <h4>Cardiopulmonary: </h4>
                <table class="checkboxGroup">
                    <tr id="checkboxAll">
                        <td class="nested-td">
                            <obs field="CP_noComplaint" conceptId="1071" answerConceptId="664" answerLabel="No complaints" style="checkbox"/>
                        </td>
                    </tr>
                    <tr id="checkboxCheckbox">
                        <!--<obsgroup groupingConceptId="143264">-->
                        <td class="enableDisable">
                            <div id="trigger">
                                <obs field="CP_cough" conceptId="1071" answerConceptId="143264" answerLabel="Cough" style="checkbox"/>
                            </div>
                            <div id="disabled" class="secondary">
                                <span class="duration">
                                    Duration: <obs field="CP_coughDuration" conceptId="1731"/><obs field="CP_coughDurationUnit" conceptId="1732" answerConceptIds="1822,1072,1073,1074,1734" />
                                </span>

                                <div class="enableDisable">
                                    <div id="trigger">
                                        <obs field="CP_productiveCough" conceptId="162174" answerConceptId="5957" answerLabel="Productive Cough" style="checkbox"/>
                                    </div>
                                    <div id="disabled" class="secondary">
                                        <obs field="CP_productiveCoughIsWhite" conceptId="5958" labelText="Quality: " answerConceptId="1075" answerLabel="White" style="checkbox"/>
										<obs field="CP_productiveCoughIsPurulent" conceptId="5958" answerConceptId="1076" answerLabel="Purulent" style="checkbox"/>
                                        <obs field="CP_productiveCoughIsBlood" conceptId="5958" answerConceptId="1077" answerLabel="Blood" style="checkbox"/>
                                    </div>
                                </div>
                            </div>
                        </td>
                        <!--</obsgroup>-->
					</tr>
					<tr id="checkboxCheckbox">
							<td class="enableDisable"><obs field="CP_apneicepisodes" conceptId="1071" answerConceptId="121519" answerLabel="Apneic episodes" style="checkbox"/></td>
					</tr>
					<tr id="checkboxCheckbox">
							<td class="enableDisable"><obs field="CP_cyanosis" conceptId="1071" answerConceptId="143050" answerLabel="Cyanosis" style="checkbox"/></td>
					</tr>
					<tr>
						<td class="enableDisable">
						<div id="trigger">
							<obs field="CP_rb" conceptId="1071" answerConceptId="1188" answerLabel="Rapid Breathing" style="checkbox"/>
						</div>
						<div id="disabled" class="secondary">
						<span class="duration">
							Duration: <obs field="CP_rbu" conceptId="1731"/><obs field="CP_rbud" conceptId="1732" answerConceptIds="1072,1073,1074,1734" />
						</span>
						</div>
						</td>
					</tr>
					<tr id="checkboxCheckbox">
						<td class="enableDisable"><obs field="CP_iwb" conceptId="1071" answerConceptId="136201" answerLabel="Increased work of breathing" style="checkbox"/></td>
					</tr>
					<tr id="checkboxCheckbox">	
						<td class="enableDisable"><obs field="CP_diaphoresis" conceptId="1071" answerConceptId="140941" answerLabel="Diaphoresis with feeds" style="checkbox"/></td>
					</tr>
                </table>
                Comments: 
                <div class="secondary"><obs field="CP_comments" id="CP_secondaryWhatIsThisField" conceptId="161011" style="textarea" rows="5" cols="50"/></div>
            </td>
            <td class="checkboxGroup">
                <h4>Gastrointestinal: </h4>
                <table class="checkboxGroup">
                    <tr id="checkboxAll">
                        <td class="nested-td">
                            <obs field="GI_noComplaints" conceptId="1078" answerConceptId="664" answerLabel="No complaints" style="checkbox"/>
                        </td>
                    </tr>
					<tr id="checkboxAll">
                        <td class="nested-td">
                            <obs field="GI_bloating" conceptId="1078" answerConceptId="147132" answerLabel="Bloating" style="checkbox"/>
                        </td>
                    </tr>
                    <tr id="checkboxCheckbox">
                        <td class="nested-td">
                            <obs field="GI_jaundice" conceptId="1078" answerConceptId="5986" answerLabel="Hx of jaundice" style="checkbox"/>
                        </td>
                    </tr>

                    <tr id="checkboxCheckbox">
                        <!--<obsgroup groupingConceptId="122983">-->
                        <td class="enableDisable">
                            <div id="trigger">
                                <obs field="GI_vomiting" conceptId="1078" answerConceptId="122983" answerLabel="Vomiting" style="checkbox"/>
                            </div>
                            <div id="disabled" class="secondary">
                                <span class="duration">
                                    Duration: <obs field="GI_vomitingDuration" conceptId="1731"/><obs field="GI_vomitingDurationUnits" answerConceptIds="1072,1073,1074" conceptId="5981" /><br></br>
									<obs field="GI_vomitinghem" conceptId="1078" answerConceptId="139006" answerLabel="Hematemesis" style="checkbox"/><br></br>
									<obs field="GI_vomitingbil" conceptId="1078" answerConceptId="147326" answerLabel="Bilious Vomiting" style="checkbox"/>
                                </span>
                            </div>
                        </td>
                        <!--</obsgroup>-->
                    </tr>
                    <tr>
                        <!--<obsgroup field="GI_diarr" groupingConceptId="142412">-->
                        <td class="enableDisable">
                            <div id="trigger">
                                <obs id="GI_diarrhea" field="GI_diarrhea" conceptId="1078" answerConceptId="142412" answerLabel="Diarrhea" style="checkbox"/>
                            </div>
                            <div id="disabled" class="secondary">
                                <span class="duration">
                                    Duration: <obs field="GI_diarrheaDuration" conceptId="1731"/><obs field="GI_diarrheaDurationUnits" conceptId="5984" answerConceptIds="1072,1073,1074" answerLabels="Days,Weeks,Months" defaultValue="1072"/>
                                </span>
                            </div>
                        </td>
                        <!--</obsgroup>-->
                    </tr>
                    <tr>						
                        <!--<obsgroup field="GI_Const" groupingConceptId="996">-->
                        <td class="enableDisable">
                            <div id="trigger">
                                <obs field="GI_constipation" conceptId="1078" answerConceptId="996" answerLabel="Constipation" style="checkbox"/>
                            </div>
                            <div id="disabled" class="secondary">
                                <span class="duration">
                                    Duration: <obs field="GI_constipationDuration" conceptId="1731"/><obs field="GI_constipationDurationUnits" conceptId="1732" answerConceptIds="1072,1073,1074" />
                                </span>
                            </div>
                        </td>
                        <!--</obsgroup>-->
                    </tr>
					<tr id="checkboxCheckbox">
                        <!--<obsgroup field="GI_Blood" groupingConceptId="122983">-->
                        <td class="enableDisable">
                            <div id="trigger">
                                <obs field="GI_BloodInstool" conceptId="1078" answerConceptId="162161" answerLabel="Blood in stool" style="checkbox"/>
                            </div>
                            <div id="disabled" class="secondary">
                                <span class="duration">
                                    Duration: <obs field="GI_BloodInstoolDuration" conceptId="1731"/><obs answerConceptIds="1072,1073,1074" field="GI_BloodInstoolDurationUnits" conceptId="5981" /><br></br>
									<obs field="GI_BloodInstoolhem" conceptId="1078" answerConceptId="134394" answerLabel="Black" style="checkbox"/><br></br>
									<obs field="GI_BloodInstoolbil" conceptId="1078" answerConceptId="117671" answerLabel="Frank blood" style="checkbox"/>
                                </span>
                            </div>
                        </td>
                        <!--</obsgroup>-->
                    </tr>
                </table>
                <br/>
                Comments: 
                <div class="secondary"><obs field="GI_comments" id="GI_comments" conceptId="161011" style="textarea" rows="5" cols="50"/></div>
            </td>
		</tr>
		<tr>
<td>
                <h4>Genitourinary: </h4>
                <table class="checkboxGroup">
                    <tr id="checkboxAll">
                        <td class="nested-td">
                            <obs field="GU_nc" conceptId="1080" answerConceptId="664" answerLabel="No complaints" style="checkbox"/>
                        </td>
                    </tr>

                    <tr id="checkboxCheckbox">
                        <td class="nested-td">
                            <obs field="GU_he" conceptId="1080" answerConceptId="840" answerLabel="Hematuria" style="checkbox"/>
                        </td>
					</tr>
					<tr id="checkboxCheckbox">
                        <td class="nested-td">
                            <obs field="GU_oli" conceptId="1080" answerConceptId="132418" answerLabel="Oliguria" style="checkbox"/>
                        </td>
                    </tr>
                    <tr id="checkboxCheckbox">
                        <includeIf velocityTest="$patient.gender == 'F' ">
                        <!--<obsgroup field="GU_F" groupingConceptId="160620">-->
                        <td class="nested-td">
                            <div class="enableDisable">
                                <div id="trigger">
                                    <obs field="GU_vd" conceptId="1080" answerConceptId="5993" answerLabel="Vaginal Discharge" style="checkbox"/>
                                </div>
                                <div class="secondary" id="disabled">
                                    Duration: <obs field="GU_vdd" conceptId="1731"/><obs field="GU_vdu" conceptId="1732" answerConceptIds="1822,1072,1073,1074" answerLabels="Hours,Days,Weeks,Months" defaultValue="1072"/>
                                </div>
                            </div>
                        </td>
                        <!--</obsgroup>-->
                        </includeIf>
                        <includeIf velocityTest="$patient.gender == 'M' ">
                        <!--<obsgroup field="GU_M" groupingConceptId="160653">-->
                        <td class="nested-td">
                            <obs field="GU_circumcised" conceptId="1080" answerConceptId="145096" answerLabel="Circumcised" style="checkbox"/><br/>

                            <div class="enableDisable">
                                <div id="trigger">
                                    <obs field="GU_ud" conceptId="1080" answerConceptId="123529" answerLabel="Urethral Discharge" style="checkbox"/>
                                </div>
                                <div class="secondary" id="disabled">
                                    <span class="duration">
                                        Duration: <obs field="GU_udd" conceptId="1731"/><obs field="GU_udu" conceptId="1732" answerConceptIds="1822,1072,1073,1074" answerLabels="Hours,Days,Weeks,Months" defaultValue="1072"/>
                                    </span>
                                </div>
                            </div>
                        </td>
                        <!--</obsgroup>-->
                        </includeIf>
                    </tr>
					<tr>
						<td class="nested-td"> 
						<obs field="GU_sores" answerLabel="Genital Sores" answerConceptId="864" conceptId="1080" style="checkbox"/>
						</td>
					</tr>
                </table>
                <br/>
                Comments: 
                <div class="secondary"><obs field="GU_comments" id="GU_comments" conceptId="161011" style="textarea" rows="5" cols="50"/></div>
            </td>
            <td class="checkboxGroup">
                <h4>Musculoskeletal: </h4>
                <table class="checkboxGroup">
                    <tr id="checkboxAll">
                        <td class="nested-td">
                            <obs field="MS_noComplaints" conceptId="1081" answerConceptId="664" answerLabel="No complaints" style="checkbox"/>
                        </td>
                    </tr>
                    <tr id="checkboxCheckbox">
                        <td class="nested-td">
                            <obs field="MS_swelling" conceptId="1081" answerConceptId="5312" answerLabel="Swelling of joints" style="checkbox"/>
                        </td>
					</tr>
					<tr>
                        <td class="nested-td">
                            <obs field="MS_edema" conceptId="1081" answerConceptId="590" answerLabel="Edema of legs" style="checkbox"/>
                        </td>
                    </tr>
                </table>
                <br/>
                Comments: 
                <div class="secondary"><obs field="MS_comments" id="MS_comments" conceptId="161011" style="textarea" rows="5" cols="50"/></div>
            </td>
        </tr>
        <tr>
            <td class="checkboxGroup">
                <h4>Central Nervous System: </h4>
                <table class="checkboxGroup">
                    <tr id="checkboxAll">
                        <td class="nested-td">
                            <obs field="CNS_nc" conceptId="1082" answerConceptId="664" answerLabel="No complaints" style="checkbox"/>
                        </td>
                    </tr>
                    <tr id="checkboxCheckbox">
                        <td class="nested-td">
                            <obs field="CNS_se" conceptId="1082" answerConceptId="206" answerLabel="Seizures" style="checkbox"/>
                        </td>
					</tr>
					<tr>
                        <td class="nested-td">
                            <obs field="CNS_h" conceptId="1082" answerConceptId="116556" answerLabel="Stiffness" style="checkbox"/>
                        </td>
                    </tr>
                </table>
                <br/>
                Comments: 
                <div class="secondary"><obs field="CNS_comments" id="CNS_comments" conceptId="161011" style="textarea" rows="5" cols="50"/></div>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <h4>Developmental</h4>
                <table class="checkboxGroup" style="width:auto;">
                    <tr id="checkboxAll">
                        <td class="nested-td">
                            <obs field="DEV_nc" conceptId="159891" answerConceptId="664" answerLabel="No complaints" style="checkbox"/>
                        </td>
                    </tr>
					<tr id="checkboxCheckbox">
					    <td class="nested-td">
                            <obs field="DEV_ts" conceptId="1189" answerConceptId="162162" answerLabel="Turns head towards sounds?" style="checkbox"/>
                        </td>
					</tr>
					<tr id="checkboxCheckbox">
					    <td class="nested-td">
						<obs field="DEV_makessound" conceptId="1189" answerConceptId="162163" answerLabel="Makes sounds while you talk to him/her?" style="checkbox"/>
					    </td>
					</tr>	
					<tr id="checkboxCheckbox">
					    <td class="nested-td">
						<obs field="DEV_vocalizespleasure" conceptId="1189" answerConceptId="162164" answerLabel="Vocalizes pleasure or displeasure?" style="checkbox"/>
					    </td>
					</tr>
					<tr id="checkboxCheckbox">
					    <td class="nested-td">
						<obs field="DEV_rollsfromback" conceptId="1189" answerConceptId="162165" answerLabel="Rolls from back to side?" style="checkbox"/>
					    </td>
					</tr>		
					<tr id="checkboxCheckbox">
					    <td class="nested-td">
						<obs field="DEV_sits" conceptId="1189" answerConceptId="162166" answerLabel="Sits with support?" style="checkbox"/>
					    </td>
					</tr>				
					<tr id="checkboxCheckbox">
					    <td class="nested-td">
						<obs field="DEV_reaches" conceptId="1189" answerConceptId="162167" answerLabel="Reaches/grasps objects?" style="checkbox"/>
					    </td>
					</tr>					
                    <tr id="checkboxCheckbox">
                        <td class="nested-td">
                            <obs field="DEV_dm" conceptId="1189" answerConceptId="6022" answerLabel="Delayed milestones" style="checkbox"/>
                        </td>
					</tr>					
                    <tr id="checkboxCheckbox">
                        <td class="nested-td">
                            <obs field="DEV_rm" conceptId="1189" answerConceptId="6025" answerLabel="Regressed milestones" style="checkbox"/>
                        </td>
					</tr>					
                </table>
                <br/>
                Other Maternal Concerns: 
                <div class="secondary"><obs field="DEV_comments" id="DEV_comments" conceptId="161011" style="textarea" rows="5" cols="50"/></div>
            </td>
        </tr>
    </table>
    </section>
</span>

    <span id="S5">
    <section headerLabel="Current Medications">
        <table>
            <tr>
                <td>
                    <obs field="currentmedications" labelText="" style="textarea" cols="150" conceptId="1354" />
                </td>
            </tr>
        </table>
        </section>
    </span>

    <span id="S6">
    <section headerLabel="Vaccinations">
<table>
    <tr>
        <td class="enableDisable" id="vac_uptodate">
            Is the child's vaccinations up to date?
            <obs id="vac_button_trigger" field="vac_update" conceptId="5585" answerConceptIds="1065,1066,1067" answerLabels="Yes,No,Unknown" style="radio" required="true"/>
            <br />
            <span class="secondary" id="vac_evervac"> 
                Has the child ever been vaccinated?
                <obs id="vac_button_triggered" field="vac_ever" conceptId="5853" answerConceptIds="1065,1066,1067" answerLabels="Yes,No,Unknown" style="radio" />
            </span>
        </td>
    </tr>
    <tr>
        <td id="nested-td">
            Comments: <obs field="vac_comments" conceptId="161011"/>
        </td>
    </tr>
</table>
</section>
</span> 

<!-- this section is taken mostly from the newborn form but is heavily reformatted.
some of the internal sections are also taken from other forms-->
<span id="S8">
<section headerLabel="Physical Examination">
<table id="two-wide">
<tr>
<td colspan="2"  class="boarder-box">
    <table>
		<tr>
			<td  class="nested-td" style="width:150px"><b>Vital Signs:</b></td>
		</tr>
		<tr>
			<!-- Heart Rate -->
			<td class="nested-td" >HR:</td>
			<td class="nested-td"><obs field="SH_heartrate" conceptId="5087"/></td>
		</tr>
		<tr>
			<!-- Blood pressure -->
			<td  class="nested-td">BP:</td>
			<td  class="nested-td" colspan="2"><obs field="SH_bloodpressure" conceptId="5085"/> / <obs field="sh_bp2" conceptId="5086"/></td>
		</tr>
		<tr>
			<!-- Respiratory Rate -->
			<td  class="nested-td">RR:</td>
			<td  class="nested-td"><obs field="SH_respitoryrate" conceptId="5242"> </obs></td>
		</tr>
		<tr>
			<!-- BLOOD OXYGEN SATURATION -->
			<td  class="nested-td">SpO2:</td>
			<td  class="nested-td"><obs field="SH_spo2" conceptId="5092"> </obs> %</td>
		</tr>
		<tr>
			<td  class="nested-td">Temperature:</td>
			<td  class="nested-td"><obs field="SH_temp" conceptId="5088"></obs>(C)</td>
		</tr>
		<tr>
			<td  class="nested-td">Weight:</td>
			<td  class="nested-td"><obs field="SH_demographics_weight" conceptId="5089"/>kg</td>
		</tr>
	  <tr>
	    <td  class="nested-td">Weight:</td>
	    <td  class="nested-td"><obs field="SH_demographics_weight_percentile" conceptId="159428"/>(%ile)</td>
	  </tr>
	  <tr>
	    <td  class="nested-td">Length:</td>
	    <td  class="nested-td"><obs field="SH_demographics_height" conceptId="5090"/>cm</td>
	  </tr>
	
	  <tr>
	    <td  class="nested-td">Length:</td>
	    <td  class="nested-td"><obs field="SH_demographics_height_percentile" conceptId="159429"/>(%ile)</td>
	  </tr>
	  <tr>
	    <td  class="nested-td">Head Circumference</td>
	    <td  class="nested-td"><obs field="SH_hcirc" conceptId="5314"/>cm</td>
	  </tr>
	  <tr>
	    <td  class="nested-td">Head Circumference</td>
	    <td  class="nested-td"><obs field="SH_hcirc_percentile" conceptId="162171"/>(%ile)</td>
	  </tr>
	</table>
</td>
</tr>
<tr>
<td class="boarder-box checkboxGroup">
	<h4>General Assessment:</h4>
	<!-- normal-->
	<span id="checkboxAll"><obs id="normal" field="General_Assessment_normal" answerConceptId="1115" conceptId="162099" style="checkbox" answerLabel="Normal"></obs></span>
	<br />
	<span id="checkboxCheckbox" class="enableDisable">
	<!-- abnormal -->
	<span id="trigger"><obs id="abnormal" class="abnormaltext" field="General_Assessment_abnormal" answerConceptId="1116" conceptId="162099" style="checkbox" answerLabel="Abnormal" showCommentField="true"> </obs></span>
	<span id="disabled">
	<br />
	<obs conceptId="162098" style='checkbox' name='general_assessment_irritable' answerLabel="irritable" field='general_assessment_irritable'/>Irritable
	<br />
	<obs conceptId="162100" style='checkbox' name='general_assessment_lethargic' answerLabel="lethargic" field='general_assessment_lethargic'/>Lethargic
	</span>
	</span>
	<h4>Dehydration/Sepsis Assesment:</h4>
	<span id="checkboxAll"><obs id="normal" field="Dehydration_normal" answerConceptId="1115" conceptId="162099" style="checkbox" answerLabel="Normal"></obs></span>
	<br />
	<span id="checkboxCheckbox" class="enableDisable">
	<span id="trigger"><obs id="abnormal" class="abnormaltext" field="Dehydration_abnormal" answerConceptId="1116" conceptId="162099" style="checkbox" answerLabel="Abnormal" showCommentField="true"> </obs> </span>
	<span id="disabled">
	<br />
	<obs field="Dehydration_signs" conceptId="1497" />Signs of dehydration
	<br />
	<obs field="Dehydration_cold" conceptId="162090" style='checkbox'/>Cold extremities
	<br />
	<obs field="Dehydration_pallor" conceptId="5254" style='checkbox'/>Pallor
	<br />
	<obs field="Dehydration_pulses" conceptId="162050" style='checkbox' />Reduced peripheral pulses
	<br />
	<obs field="Dehydration_refill" conceptId="162051" style='checkbox' />Prolonged capillary refill
	<br />
	</span>
	</span>
	Other Abnormalities/Details: <div class="secondary"><obs field="General_Assessment_comments" id="Mouth_comments" conceptId="161011" style="textarea" rows="5" cols="50"></obs></div>
</td>
<td class="boarder-box checkboxGroup">
	<h4>Head and Neck:</h4>
	<span id="checkboxAll"><obs field="HeadAndNeck_normal" id="normal" conceptId="162104" style='checkbox'/></span>
	<br />
	<span id="checkboxCheckbox" class="enableDisable">
	<span id="trigger"><obs field="HeadAndNeck_abnormal"  id="abnormal" class="abnormaltext" conceptId="162114" style='checkbox' showCommentField="true"/></span>
	<span id="disabled">
	<h4>Fontanelle</h4>
	<span id="checkboxCheckbox" class="enableDisable">
	<span id="trigger"><obs field="Fontanelle_abnormal" id="abnormal" class="abnormaltext" conceptId="162115" style='checkbox' showCommentField="true"/></span>
	<span id="disabled">
	<br />
	<Img style = "width:10px;"/><obs field="Fontanelle_sunken" conceptId="162052" style='checkbox'/>Sunken
	<br />
	<Img style = "width:10px;"/><obs field="Fontanelle_bulging" conceptId="162091" style='checkbox'/>Bulging
	<br />
	<!--Other:
	<br/>
	<div class="secondary">
		<obs field="fontanelle_others" id="fontanelle_others" conceptId="161011" style="textarea" rows="5" cols="50"></obs>
	</div> -->
	</span>
	</span>	
	<h4>Eyes</h4>
	<span id="checkboxCheckbox" class="enableDisable">
	<span id="trigger"><obs field="eyes_abnormal" id="abnormal" class="abnormaltext" conceptId="162114" answerLabel="Abnormal" style='checkbox' showCommentField="true"/></span>
	<span id="disabled">
	<br />
	<Img style = "width:10px;"/><obs field="eyes_red_right" conceptId="162168" answerConceptId="135851" style='checkbox' answerLabel=""/>Abnormal red reflex (right eye)
	<br />
	<Img style = "width:10px;"/><obs field="eyes_red_left" conceptId="162169" answerConceptId="135851" style='checkbox' answerLabel=""/>Abnormal red reflex (left eye)
	<br />
	<Img style = "width:10px;"/><obs field="eyes_Strabismus" conceptId="162066" answerConceptId="135851" style='checkbox' answerLabel=""/>Strabismus 
	<br />
	<Img style = "width:10px;"/><obs  field="eyes_Leukocoria_right" conceptId="162105" answerConceptId="135851" style='checkbox' answerLabel=""/>Leukocoria (right eye)
	<br />
	<Img style = "width:10px;"/><obs  field="eyes_Leukocoria_left" conceptId="162105" answerConceptId="135851" style='checkbox' answerLabel=""/>Leukocoria (left eye)
	</span>
	</span>
    <h4>Mouth</h4>
	<span id="checkboxCheckbox" class="enableDisable">
	<span id="trigger"><obs field="mouth_abnormal" id="abnormal" class="abnormaltext" conceptId="162114" answerLabel="Abnormal" style='checkbox' showCommentField="true"/></span>
	<span id="disabled">
	<br />
	<Img style = "width:10px;"/><obs field="mouth_palate" conceptId="162106" answerConceptId='145063' style='checkbox' answerLabel="Cleft palate"/>
	<br />
	<Img style = "width:10px;"/><obs field="mouth_palatelip" conceptId="162106" answerConceptId='120544' style='checkbox' answerLabel="Cleft palate with Cleft Lip"/>
	<br />
	<Img style = "width:10px;"/><obs field="mouth_lip" conceptId="162106" answerConceptId='145066' style='checkbox' answerLabel="Cleft Lip"/>
	<br />
	</span>
	</span>
	</span>
	</span>
	Other Abnormalities/Details: <div class="secondary"><obs field="Mouth_comments" id="Mouth_comments" conceptId="161011" style="textarea" rows="5" cols="50"></obs></div>
</td>
</tr>
<tr>
<td class="boarder-box checkboxGroup">
	<!-- Taken from the Pediatric Followup form -->
    <h4>Cardiovascular</h4>
    <span id="checkboxAll"><obs  field="HEART_normal" answerConceptId="1115" conceptId="1124" style="checkbox" answerLabel="Normal" > </obs></span>
    <br />
	<span id="checkboxCheckbox" class="enableDisable">
    <span id="trigger"><span class="obs-field"><obs id="abnormalspace" class="abnormaltext" field="HEART_abnormal" answerConceptId="1116" conceptId="1124" style="checkbox" answerLabel="Abnormal" showCommentField="true"> </obs></span></span>
    <span id="disabled">
    <br />
    <span id="checkboxCheckbox" class="enableDisable">
    <span id="trigger"><obs field="HEART_evidence" answerConceptId="5158" conceptId="1124" style="checkbox" answerLabel="Evidence for enlargement:"> </obs></span>
    <span id="disabled">
	<br />
    <Img style = "width:10px;"/><obs field="HEART_lv" answerConceptId="5156" conceptId="1124" style="checkbox" answerLabel="LV lift"> </obs>
    <br />
	<Img style = "width:10px;"/><obs field="HEART_rv" answerConceptId="5157" conceptId="1124" style="checkbox" answerLabel="RV lift"> </obs>
    <br />
    </span>
    </span>
    <span id="checkboxCheckbox" class="enableDisable">
    <span id="trigger"><obs field="HEART_sounds" answerConceptId="1117" conceptId="1124" style="checkbox" answerLabel="Abnormal Sounds:"> </obs></span>
    <span id="disabled">
	<br />
    <Img style = "width:10px;"/><obs field="HEART_s3" answerConceptId="550" conceptId="1124" style="checkbox" answerLabel="S3"> </obs>
    <br />
	<Img style = "width:10px;"/><obs field="HEART_s4" answerConceptId="551" conceptId="1124" style="checkbox" answerLabel="S4"> </obs>
    <br />
	<Img style = "width:10px;"/><obs field="HEART_friction" answerConceptId="130560" conceptId="1124" style="checkbox" answerLabel="Pericardial friction rub"> </obs>
    <br />
    </span>
    </span>
    <span id="checkboxCheckbox" class="enableDisable">
    <span id="trigger"><obs field="HEART_murmurs" answerConceptId="139063" conceptId="1124" style="checkbox" answerLabel="Murmurs:"> </obs></span>
    <span id="disabled">
	<br />
	<Img style = "width:10px;"/><obs field="HEART_systolic" answerConceptId="5166" conceptId="1124" style="checkbox" answerLabel="Systolic Ejection Murmur"> </obs>
    <br />
	<Img style = "width:10px;"/><obs field="HEART_holosystolic" answerConceptId="5162" conceptId="1124" style="checkbox" answerLabel="Holosystolic Murmur"> </obs>
    <br />
	<Img style = "width:10px;"/><obs field="HEART_diastolicDecrescendo" answerConceptId="5160" conceptId="1124" style="checkbox" answerLabel="Diastolic Decrescendo"> </obs>
    <br />
	<Img style = "width:10px;"/><obs field="HEART_rumble" answerConceptId="5164" conceptId="1124" style="checkbox" answerLabel="Diastolic Rumble"> </obs><br />
	<br />
    </span>
    </span>
    </span>
    </span>
    Other Abnormalities/Details: 
	<div class="secondary">
		<obs field="HEART_comments" id="HEART_comments" conceptId="161011" style="textarea" rows="5" cols="50"></obs>
	</div>
</td>
<td class="boarder-box checkboxGroup">
	<b>Respiratory</b>
	<br />
    <span id="checkboxAll"><obs field="Respiratory_normal" conceptId="162108" answerConceptId="1115" answerLabel="Normal" style='checkbox'/></span>
	<br />
	<span id="checkboxCheckbox" class="enableDisable">
	<span id="trigger"><span class="obs-field"><obs field="Respiratory_abnormal" id="abnormalspace" class="abnormaltext" conceptId="162108" answerConceptId="1116" answerLabel="Abnormal" style='checkbox' showCommentField="true"/></span></span>
	<span id="disabled">
	<br />
    <obs field="Respiratory_Grunting" conceptId="162108" answerConceptId="156534" answerLabel="Grunting" style='checkbox'/>
	<br />
    <obs field="Respiratory_Indrawing" conceptId="162108" answerConceptId="162092" answerLabel="Indrawing" style='checkbox'/>
	<br />
	<h4>Percussion:</h4>
    <obs field="CHEST_dull" answerConceptId="5138" conceptId="1123" style="checkbox" answerLabel="Dullness"> </obs>
    <br />
    <h4>Accessory Muscle Use:</h4>
    <obs field="CHEST_amu" answerConceptId="159441" conceptId="1123" style="checkbox" answerLabel="Accessory Muscle Use"> </obs>
    <br />
    <h4>Auscultation:</h4>
    <obs field="CHEST_diminished" answerConceptId="5115" conceptId="1123" style="checkbox" answerLabel="Breath sounds diminished"> </obs>
    <br />
	<obs field="CHEST_bronchial" answerConceptId="5116" conceptId="1123" style="checkbox" answerLabel="Bronchial breath sounds"> </obs>
    <br />
	<obs field="CHEST_ronchi" answerConceptId="5181" conceptId="1123" style="checkbox" answerLabel="Rhonchi"> </obs>
	<br />
    <obs field="CHEST_wheezes" answerConceptId="5209" conceptId="1123" style="checkbox" answerLabel="Wheezes"> </obs>
	<br />
	<obs field="CHEST_crepitations" answerConceptId="5127" conceptId="1123" style="checkbox" answerLabel="Crepitations"> </obs>
	<br/>
	Lung Finding:
	<obs field="CHEST_LUNGfinding" conceptId="159370" answerConceptIds="5120,5132,639,5119,5134,5141,5139,160406" answerLabels="Right middle lobe,left upper lobe,Right lower lobe,Right upper lobe,Left lower lobe,Right,Left,Bilateral" style="dropdown"/><br />
	</span>
	</span>
	Other Abnormalities/Details: <div class="secondary"><obs field="CHEST_comments" id="CHEST_comments" conceptId="161011" style="textarea" rows="5" cols="50"></obs></div>
</td>
</tr>
<tr>
<td class="boarder-box checkboxGroup">
	<h4>Abdomen</h4>
	<span id="checkboxAll"><obs field="ABDOMEN_normal" answerConceptId="1115" conceptId="1125" style="checkbox" answerLabel="Normal"> </obs></span>
	<br />
	<span id="checkboxCheckbox" class="enableDisable">
    <span id="trigger"><span class="obs-field"><obs id="abnormalspace" class="abnormaltext" field="ABDOMEN_abnormal" answerConceptId="1116" conceptId="1125" style="checkbox" answerLabel="Abnormal" showCommentField="true"> </obs></span></span>
    <span id="disabled">
    <br />
    Tender to palpation: <obs field="ABDOENTENDER" conceptId="1125" style="dropdown" answerConceptIds="160380,5104,5107,160381,5099,575,140070,124998" answerLabels="Left upper quadrant,Left lower quadrant,Right upper quadrant,Right lower quadrant,Epigastric,Suprapubic,Flank pain,Periumbilical"/>
	<br/>
    <obs field="ABDOMEN_ascites" answerConceptId="148346" conceptId="1125" style="checkbox" answerLabel="Ascites"> </obs>
    <br />
	<obs field="ABDOMEN_mass" answerConceptId="5103" conceptId="1125" style="checkbox" answerLabel="Mass"> </obs>
    <br />
	<span id="checkboxCheckbox" class="enableDisable">
    <span id="trigger"><obs field="ABDOMEN_hepatome" answerConceptId="5008" conceptId="1125" style="checkbox" answerLabel="Hepatomegaly"> </obs></span>
    <span id="disabled">
    <obs field="ABDOMEN_cmbelow" conceptId="162173"> </obs>(cm below costal margin)
    <br />
    </span>
    </span>
    <span id="checkboxCheckbox" class="enableDisable">
    <span id="trigger"><obs field="ABDOMEN_splenomegaly" answerConceptId="5009" conceptId="1125" style="checkbox" answerLabel="Splenomegaly"> </obs></span>
    <span id="disabled">
    <obs field="ABDOMEN_cmbelowsplen" conceptId="162172"> </obs>(cm below costal margin)
    <br />
    </span>
    </span>
    </span>
	</span>
	<h4>Umbilical Stump Examination</h4>
	<span id="checkboxAll"><obs field="Umbilical_normal" id="normal" conceptId="162054" style='checkbox'/></span>
	<br />
	<span id="checkboxCheckbox" class="enableDisable">
    <span id="trigger"><obs field="Umbilical_abnormal" id="abnormal" class="abnormaltext" conceptId="162116" style='checkbox' showCommentField="true"/></span>
	<span id="disabled">
	<br />
	<obs field="Imperforate_Anus" conceptId="162109" style='checkbox' name="imperforate_anus" />Imperforate Anus
	<br />
	</span>
	</span>
	Other Abnormalities/Details:
	<div class="secondary">
		<obs field="abdomen_comments" id="abdomen_comments" conceptId="161011" style="textarea" rows="5" cols="50"/>
	</div>
</td>	
<td class="boarder-box checkboxGroup">	
	<h4>Genitourinary</h4>
	<span id="checkboxAll"><obs field="Genitourinary_normal" id="normal" conceptId="162110" style='checkbox'/></span>
	<br />
	<span id="checkboxCheckbox" class="enableDisable">
    <span id="trigger"><obs field="Genitourinary_abnormal" id="abnormal" class="abnormaltext" conceptId="162117" style='checkbox' showCommentField="true"/></span>
	<span id="disabled">
	</span>
	</span>
	<br />
	Other Abnormalities/Details:
	<div class="secondary">
		<obs field="Genitourinary_comments" id="Genitourinary_comments" conceptId="161011" style="textarea" rows="5" cols="50"/>
	</div>
</td>
</tr>
<tr>
<td class="boarder-box checkboxGroup">		
	<!-- From the Newborn form -->
	<b>Musculoskeletal:</b>
	<br />
    <span id="checkboxAll"><span class="obs-field"><obs field="Musculoskeletal_normal" conceptId="162111" answerConceptId="1115" answerLabel="Normal" style='checkbox' /></span></span>
	<br />
	<span id="checkboxCheckbox" class="enableDisable">
	<span id="trigger"><span class="obs-field"><obs field="Musculoskeletal_abnormal" id="abnormalspace" class="abnormaltext" answerConceptId="1116" conceptId="1125" style="checkbox" answerLabel="Abnormal" showCommentField="true"> </obs></span></span>
    <span id="disabled">
	<br />
	<obs field="Musculoskeletal_spine" conceptId="162111" answerConceptId="120050" answerLabel="Spine Abnormal" style='checkbox' />
    <br />
	<obs field="Musculoskeletal_hip" conceptId="162111" answerConceptId="119955" answerLabel="Congenital hip dislocation" style='checkbox' />
    <br />
	</span>
	</span>
		Other Abnormalities/Details:
	<br />
	<div class="secondary">
		<obs field="musculoskeletal_comments" id="musculoskeletal_comments" conceptId="161011" style="textarea" rows="5" cols="50"/>
	</div>
</td>	
<td class="boarder-box checkboxGroup">	
    <h4>Neurological</h4>
    <span id="checkboxAll"><span class="obs-field"><obs field="Neurological_normal" conceptId="162112" answerConceptId="1115" answerLabel="Normal" style='checkbox'/></span></span>
	<br />
	<span id="checkboxCheckbox" class="enableDisable">
	<span id="trigger"><span class="obs-field"><obs field="Neurological_abnormal" id="abnormalspace" class="abnormaltext" conceptId="162112" answerConceptId="5264" answerLabel="Abnormal" style='checkbox' showCommentField="true"/></span></span>
    <span id="disabled">
	<h4>Reflexes</h4>
	<obs field="Neurological_primitive" conceptId="162112" answerConceptId="162055" answerLabel="Primitive Reflexes Present" style='checkbox'/>
	<br />
	<obs field="Neurological_deeptendon" conceptId="162112" answerConceptId="1448" answerLabel="Deep tendon reflexes" style="checkbox" />
	<br />
	<h4>Tone</h4>
	<obs field="Tone_abnormal" conceptId="5264" answerLabel="Abnormal Tone" style='checkbox'/>
	<br />
    <obs field="Tone_floppy" conceptId="162112" answerConceptId="140075" answerLabel="Floppy" style='checkbox'/>
	<br />
    <obs field="Tone_stiff" conceptId="162112" answerConceptId="133629" answerLabel="Stiff" style='checkbox'/>
	<br />
    <obs field="Tone_persistent" conceptId="162112" answerConceptId="162055" answerLabel="Persistent Primitive Reflexes" style='checkbox'/>
    <br />
    <obs field="Tone_deeptendon" conceptId="162112" answerConceptId="1448" answerLabel="Deep Tendon Reflexes" style='checkbox'/>	
	<br />
	</span>
	</span>
	Other Abnormalities/Details: 
    <div class="secondary">
        <obs field="neurological_comments" id="neurological_comments" conceptId="161011" style="textarea" rows="5" cols="50"></obs>
    </div>
</td>
</tr>
<tr>	
<td class="boarder-box checkboxGroup">
	<h4>Dermatologic</h4>
	<span id="checkboxAll"><obs field="dermatologic_normal" answerConceptId="1115" conceptId="162113" style="checkbox" answerLabel="Normal"> </obs></span>
	<br />
	<span id="checkboxCheckbox" class="enableDisable">
	<span id="trigger"><span class="obs-field"><obs id="abnormalspace" class="abnormaltext" field="dermatologic_abnormal" answerConceptId="1116" conceptId="162113" style="checkbox" answerLabel="Abnormal" showCommentField="true"> </obs></span></span>
	<span id="disabled">
	<br />
	<obs field="dermatologic_jaundice" answerConceptId="136443" conceptId="1125" style="checkbox" answerLabel="Jaundice"> </obs>
	<br />
	<span id="checkboxCheckbox" class="enableDisable">
	<span id="trigger"><obs field="dermatologic_rashes" answerConceptId="162093" conceptId="1125" style="checkbox" answerLabel="Rashes"> </obs></span>
	<span id="disabled">
	<br />
	rash comments:<obs field="dermatologic_rashescomment" conceptId="162170" />
	</span>
	</span>
	</span>
	</span>
	<br />
	Other Abnormalities/Details: 
	<div class="secondary">
		<obs field="dermatology_comments" id="dermatology_comments" conceptId="161011" style="textarea" rows="5" cols="50"></obs>
	</div>
</td>
</tr>
</table>
</section>
</span>

<span id="S9">
<section headerLabel="Counselling">
<table>
  <tr>
    <td style="white-space:pre;" >Counselling on Danger Signs Given: </td>
    <td valign="top" ><obs field="Counselling_danger" conceptId="161071" /></td>
  </tr>
  <tr>
	<td colspan="2">(E.g. not feeding well, reduced activity, difficulty in breathing, cord stump redness or discharge, fever, cold to touch, convulsions)</td>
  </tr>
  <tr><td><br/></td></tr>
  <tr>
    <td>Counseling on Infant Feeding:</td>
	<!--replaced 162057 with 162175-->
    <td><obs field="Counselling_feeding" conceptId="162175" answerConceptIds="1066,1067,1065" /></td>
  </tr>
  <tr>
    <td>Feeding Plan</td>
    <td><obs field="Counselling_feedingplan" conceptId="985" showCommentField="true" /></td>
  </tr>
  <tr>
    <td>If feeding method changed please indicate reason:</td>
    <td><obs field="Counselling_feedingmethod" conceptId="986" showCommentField="true" /></td>
  </tr>
  <tr>
    <td>If mother HIV+ , was infant feeding with HIV counseling done?</td>
    <td><obs field="Counselling_feedinghiv" conceptId="162058" /></td>
  </tr>
</table>


</section>
</span>


<span id="Referrals">
<section headerLabel="Referrals">

<table>
<tr>
<td>

                    <h4>Referrals Made:</h4>

    <repeat>
                <template>
                <table>
                    <tr id="{n}-toggleContainer" style="display:none;">
                    
                            <td class="nested-td">
                            Referral:<obs id="{n}-list" field="REFER_{n}" conceptId="1272" style="dropdown"/>
                            Location: <obs id="{n}-list" field="REFER_loc{n}" conceptId = "1272" answerClasses="KMRI_Locations" style="dropdown" showCommentField="true" />
                            </td>
                            <td class="nested-td"><button id="{n}-addEntry" class="addEntry">Add</button><button id="{n}-removeEntry" class="removeEntry">Remove</button></td>
                        </tr>
                    </table>
                </template>
                                <render n="101"/>
                <render n="102"/>
                <render n="103"/>
                <render n="104"/>
                <render n="105"/>
                <render n="106"/>
                <render n="107"/>
                <render n="108"/>
                <render n="109"/>
                <render n="110"/>
                </repeat>
</td>
            </tr>
        </table>
        </section>
</span>

<span id="S11"> 
    <section headerLabel="Impressions">

<br />

<b>Reportable Diagnoses:</b>
            
<obsgroup groupingConceptId="161602">
                <repeat>
                <template>
                <table>
                    <tr id="{n}-toggleContainer" style="display:none;">
                            <td class="nested-td">
                            <obs id="{n}-list" field="REPDIAG_{n}" conceptId="1284" answerClasses="RequiredDiagnosis" showCommentField="true" style="dropdown"/>
                            </td>
                            <td class="nested-td"><button id="{n}-addEntry" class="addEntry">Add</button><button id="{n}-removeEntry" class="removeEntry">Remove</button></td>
                        </tr>
                    </table>
                </template>
                <render n="1"/>
                <render n="2"/>
                <render n="3"/>
                <render n="4"/>
                <render n="5"/>
                <render n="6"/>
                <render n="7"/>
                <render n="8"/>
                <render n="9"/>
                <render n="10"/>
                <render n="11"/>
                <render n="12"/>
                <render n="13"/>
                <render n="14"/>
                <render n="15"/>
                <render n="16"/>
                <render n="17"/>
                <render n="18"/>
                <render n="19"/>
                <render n="20"/>
                <render n="21"/>
                <render n="22"/>
                <render n="23"/>
                <render n="24"/>
                <render n="25"/>
                <render n="26"/>
                <render n="27"/>
                <render n="28"/>
                <render n="29"/>
                <render n="30"/>
                <render n="31"/>
                <render n="32"/>
                <render n="33"/>
                <render n="34"/>
                <render n="35"/>
                <render n="36"/>
                <render n="37"/>
                <render n="38"/>
                <render n="39"/>
                <render n="40"/>
                <render n="41"/>
                <render n="42"/>
                <render n="43"/>
                <render n="44"/>
                </repeat>
        </obsgroup>

<span id="test"> 

<b> Diagnoses: </b>
<repeat>
                <template>
                <table>
                    <tr id="{n}-toggleContainer" style="display:none;">
                            <td class="nested-td">
                            <obs id="{n}-list" field="DIAG_{n}" conceptId="1284" answerClasses="Diagnosis" showCommentField="true" style="autocomplete"/>
                            </td>
                            <td class="nested-td"><button id="{n}-addEntry" class="addEntry">Add</button><button id="{n}-removeEntry" class="removeEntry">Remove</button></td>
                        </tr>
                    </table>
                </template>
                <render n="401"/>
                <render n="402"/>
                <render n="403"/>
                <render n="404"/>
                <render n="405"/>
                <render n="406"/>
                <render n="407"/>
                <render n="408"/>
                <render n="409"/>
                <render n="410"/>

                </repeat>


</span>


        <div id="patid" style="display:none;"><lookup expression="patient.id"/></div> 
<br />
    Comments:  <div class="secondary"> <obs field="REPORTABLE_comments" id="REPORTABLE_comments" conceptId="161011"  style="textarea" rows="5" cols="50"></obs></div>       

    <br />

    <div>
        Next scheduled Appointment Date?
        <obs field="nextappointmentdate" id="nextappointmentdate" conceptId="5096" allowFutureDates="true"> </obs>
    </div>
    </section>

    </span>

<!-- Hidden concepts for add/remove sections -->
    <span id="testspan" style="display:none;">
        <obs field="ugh1" id="addedDiagnosisCount" conceptId="161649" />
                <obs field="ugh2" id="addedSurgeryCount" conceptId="161648" />
                <obs field="ugh3" id="addedReferralsCount" conceptId="161652"/>
                <obs field="ugh4" id="addedDiagCount" conceptId="161737"/>
                <obs field="ugh5" id="addedLabsCount" conceptId="161738"/>
                <obs field="ugh6" id="addedRadCount" conceptId="162006"/>
                <obs field="ugh7" id="addedUsCount" conceptId="161650"/>
    </span>

<script type="text/javascript">
$j(document).ready(function() {

    var applyAllRButtons = function (id, f) {
        var radio;

        if (!id)
            return;

        if (typeof(id) === "string" )
            radio = $j("#" + id);
        else
            radio = $j(id);

        if (!radio)
            return;

        radio.find("input[type$='radio']").each(function(i, e) {
            var je = $j(e);
            f(i, je);
        });
    }


    var bindAllonClick  = function(id, f) {
        applyAllRButtons(id, function(i, e) {e.click(f);});
    }

    var enableRadio = function (id) {
        applyAllRButtons(id, function(i, e) {e.attr("disabled",false);} );
    } 


    var disableRadio = function (id) {
        applyAllRButtons(id, function(i, e) {e.attr("disabled",true);} );
    } 


    var radioSetter = function (id, val) {
        applyAllRButtons(id, function(i, e) {
            e.attr("checked",false);
            if (e.val() == val)
                e.attr("checked",true);
        });
    } 

    var radioGetter = function (id) {
        var radio;

        if (!id)
            return;

        if (typeof(id) === "string" )
            radio = $j("#" + id);
        else
            radio = $j(id);

        if (!radio)
            return;

        return radio.find("input[type$='radio']:checked").val();
    }


    var trgBtn = $j("#vac_button_trigger");
    var trgedBtn = $j("#vac_button_triggered");

	<!-- note this code explicitly sets the Vaccinations section to be unset when the form is editing mode -->
	disableRadio(trgedBtn);
    $j("#vac_evervac").fadeTo(250,0.33);
	radioSetter(trgedBtn, 0);
    //radioSetter(trgBtn, 0);

    bindAllonClick(trgBtn, function(i, e){
        if (radioGetter(trgBtn) == 1065)  {
            disableRadio(trgedBtn);
            $j("#vac_evervac").fadeTo(250,0.33);
            radioSetter(trgedBtn, 0);
        } else {
            enableRadio(trgedBtn);
            radioSetter(trgedBtn, 0);
            $j("#vac_evervac").fadeTo(250,1);
        }
    });

    beforeSubmit.push(function () {

        var r1 = radioGetter(trgBtn);
        var r2;

        if (!r1) {
            getField('vac_button_trigger.error').html('Vaccination status is required.').show();
            return false;
        }

        if (r1 == 1065) {
            radioSetter(trgedBtn, 0);
            return true;
        }

        r2 = radioGetter(trgedBtn);

        if (!r2) {
            getField('vac_button_triggered.error').html('Vaccination status is required.').show();
            return false;
        }

        return true;
    });

});
</script>   <!-- TRAVIS' FUNCTION -->
<script type="text/javascript">
function openImpressions(){
var url = "/openmrs/module/impressions/impressionList.list\?nw=1\u0026patientId=" + document.getElementById('patid').innerHTML.trim();
window.open(url );
}

    if (jQuery){
    $j(document).ready(function() {
                //
                // find the count of the number of reported diagnoses that exist
                //      
                displayRows(addedDiagnosisCount,"addedDiagnosisCount.value",1);
                displayRows(addedSurgeryCount,"addedSurgeryCount.value",45);
                displayRows(addedReferralsCount,"addedReferralsCount.value",101);
                displayRows(addedLabsCount,"addedLabsCount.value",201);
                displayRows(addedDiagCount,"addedDiagCount.value",401);
                displayRows(addedUsCount,"addedUsCount.value",301);
                displayRows(addedRadCount,"addedRadCount.value",501);

    });
    }
</script>
    
        <ifMode mode="VIEW">
        <script type="text/javascript">
    if(jQuery){

        $j(document).ready(function(){
             // if this is in View, don't want any addEntry or remove Entry buttons 
                     for (i=1;600>=i;++i) {
                          $j('#' + i + '-removeEntry').toggle(false);
                          $j('#' + i + '-addEntry').toggle(false);
                     };
                 });
			$j('span#normal').find('span:first').append("Normal");
			$j('span#abnormal').find('span:first').append("Abnormal");
        };
        </script>
    </ifMode>

    <submit/>
    </htmlform>
<htmlform>

<!-- 
==============================================================
Javascript helper functions taken from the HTML Form Entry Javascript Reference at 
https://wiki.openmrs.org/display/docs/HTML+Form+Entry+JavaScript+Reference 
==============================================================
-->

<script type="text/javascript">

        function isBlank(listValueString,numListElements,allBlank) {
                var numCheck = 1;
                if (allBlank) {numCheck = numListElements};
                var thisListValueString = listValueString;
                if (numListElements > 1) {
                    thisListValueString = thisListValueString + "_1";
                };
                var i = 1;
                while (numCheck >= i) {
                         if (getValue(thisListValueString) != '' ) {
                            return false;
                         };
                         i++;
                         thisListValueString = listValueString + "_" + i;
                };
                return true;                      
        };

        function removeBlanks(startRow,numberRows,listValueString,numListElements,allBlank) {
                //
                //function shuffles all non-blank rows from array item start to start+number-1 to the beginning
                // startRow is the first row in the array 
                // numberRows is the number of rows in this block
                // numListElements is the number of elements in each row
                // if numListElements is more than one allBlank TRUE means to ensure all elements are blank otherwise checks just the first
                //
           
                var i = startRow;
                var nonBlankCount = 0;
                var lastRow = startRow +numberRows - 1;
                var baseListValueString = listValueString;
                if (numListElements > 1) {
                    baseListValueString = baseListValueString + "_1";
                };

                while (lastRow >= i) {
        	      
                      // keep going if nonblank 
                      if (!isBlank((i+listValueString),numListElements,allBlank)) {
                          i++;
                          nonBlankCount ++;
                      } else {
                          // found blank line, find next non-blank 
                             var j = i + 1;
                             while ((lastRow >= j) &amp;&amp; (isBlank((j+listValueString),numListElements,allBlank))) {
                                   j++;
                             };
                             // if we have found a nonblank, move the nonblanks down
                             var newStart = j;
                             while (!isBlank((j+listValueString),numListElements,allBlank) &amp;&amp; (lastRow >= j)) {
                                 //move all of the elements in this row
                                 for (k=1; numListElements >=k; k++) {
                                       var thisListElement = listValueString + "_" + k;
                                       if ( (k==1) &amp;&amp; (numListElements == 1) ) {
                                             thisListElement = listValueString;
                                       };
                                       var moveValuestring = getValue(j + thisListElement);
                                       setValue(i + thisListElement, moveValuestring);
                                       setValue(j + thisListElement,'');
                                 };
                                 nonBlankCount++;
                                 i++;
                                 j++;                               
                             };   
                             if (j > lastRow) {
                                i = j;
                             };                            
                      };                
                };
                return nonBlankCount;
        };   //end function       

        function displayRows(countConcept,countConceptValue,startRow) {
                //
                // find the count of the number of surgeries that exist
                //		
		var addedCount = $j(countConcept).html(); 
                var regex = /(&lt;([^>]+)>)/ig;
		if (addedCount != null){
     		    var addedInt = addedCount.replace(regex, "");
		    addedCount = Number(addedInt);
		};
                //set to the first if there are none added so far
		if (addedCount == null || addedCount == '' || addedCount== 0){
                        // if we are in edit mode need to get count a different way
                        addedCount = getValue(countConceptValue);
                        if (addedCount == 0) {
                            addedCount = 1;
                        };
		};
                // make sure all of the ones we have display	
		for(i=1; addedCount>=i; i++){
                        var rowNumber = startRow + i - 1;
			var dynString = "#" + rowNumber + "-toggleContainer";
			$j(dynString).show();
		};
		
                //
                // click for the number of entries that exist so that they show up
                //
		for(i=1; addedCount>i; i++){
	              rowNumber = startRow + i - 1;		
                      dynString = "#" + rowNumber + "-addEntry";
		      $j(dynString).click();				
		};
       }

	if(jQuery){

		$j(document).ready(function(){
                                //don't need an add button on the 44 entry because they can only add 44
				$j('#44-addEntry').remove();
                                $j('#1-removeEntry').remove();

                               //don't need a button on 54 surgeries because they can only add 10
				$j('#54-addEntry').remove();
  $j('#45-removeEntry').remove();

                               //This one is for referrals
  $j('#101-removeEntry').remove();
				$j('#110-addEntry').remove();


  $j('#201-removeEntry').remove();
				$j('#210-addEntry').remove();

  $j('#401-removeEntry').remove();
				$j('#410-addEntry').remove();





                               });



$j(document).ready(function(){
  $j('button.addEntry').live("click", function(){

    var rowNumber = parseFloat(this.id);

    varListValueString = '-list.value';
    if (rowNumber > 44) {
        listValueString = '-list.value_1';
    }

 valuestring = parseFloat(this.id) + listValueString;
                                        //the second element of this or fails so if it makes it through the first 
                                        //the form crashes - left it here in case there's a case where this is nec
					if (getValue(valuestring) != '' ){
			     var correctedAddButtonId = parseFloat(this.id) + 1;

                                            // determine the right count to update
                                           if ((this.id > 400)) {
                                                valuestring = 'addedDiagCount.value';
                                            } else if (this.id > 200) {
 valuestring='addedLabsCount.value';
} else if ((this.id > 100)) {
                                                valuestring = 'addedReferralsCount.value';
                                            } else if (this.id > 44) {
                                                valuestring = 'addedSurgeryCount.value';
                                            } else {
                                                valuestring = 'addedDiagnosisCount.value';
                                            };

                                            //once we have the right count string, get the current count and increment if we have added
                                            var currentCount = getValue(valuestring);
                                            if (correctedAddButtonId>currentCount){
                                                currentCount = correctedAddButtonId;
                                                setValue(valuestring, currentCount);
                                            };

                                             // turn on the next button, toggle off the previous and turn on the remove button on this one 
				     	     var contentAddId = "#" + correctedAddButtonId + "-toggleContainer";
					     $j(contentAddId).toggle(true);
					     $j('#' + this.id).toggle(false);
                                             $j('#' + parseFloat(this.id) + '-removeEntry').toggle(true);
					}
				
                                        return false;
  });
});

                      	$j(document).ready(function(){
				$j('button.removeEntry').live("click", function(){
					var correctedRemoveButtonId = parseFloat(this.id) - 1;
					
                                        // update the right count - 1 - 44 reportable diagnoses 45 -54 surgery
                                        var whichBlock = 1;
                                           if (correctedRemoveButtonId > 400) {
                                           setValue('addedDiagCount.value', Number(getValue('addedDiagCount.value')) -1);
                                           whichBlock = 6;
                                        } else   if (correctedRemoveButtonId > 200) {
                                           setValue('addedLabsCount.value', Number(getValue('addedLabsCount.value')) -1);
                                           whichBlock = 5;
                                        } else  if (correctedRemoveButtonId > 100) {
                                           setValue('addedReferralsCount.value', Number(getValue('addedReferralsCount.value')) -1);
                                           whichBlock = 3;
                                        } else if (correctedRemoveButtonId > 44) {
                                             setValue('addedSurgeryCount.value', Number(getValue('addedSurgeryCount.value')) - 1);
                                            whichBlock = 2;
                                        } else {
                                          setValue('addedDiagnosisCount.value', Number(getValue('addedDiagnosisCount.value')) - 1);
                                        };
					var contentAddId = "#" + parseFloat(this.id) + "-toggleContainer";
					$j(contentAddId).toggle(false);
					$j( ':input:not(:button)', contentAddId).val([]);
                                        //
                                        // only need an addEntry button on the last diagnosis or last surgery 
                                        //
                                        if (    ((correctedRemoveButtonId == getValue('addedDiagnosisCount.value')) &amp;&amp; (whichBlock == 1) )
                                       ||   ((correctedRemoveButtonId == getValue('addedSurgeryCount.value'))   &amp;&amp; (whichBlock == 2)) 
                                       || ((correctedRemoveButtonId == getValue('addedReferralsCount.value'))   &amp;&amp; (whichBlock == 3))
                                       || ((correctedRemoveButtonId == getValue('addedLabsCount.value'))   &amp;&amp; (whichBlock == 5))
                                       || ((correctedRemoveButtonId == getValue('addedDiagCount.value'))   &amp;&amp; (whichBlock == 6))
) {
					     $j('#' + correctedRemoveButtonId + '-addEntry').toggle(true); 
                                        };
                                        $j('#' + correctedRemoveButtonId + '-removeEntry').toggle(true);
					return false;
					});
				});
         //
        // the main point of this function is to remove blank lines on submit
        // it also resets the number of rows to only nonblanks
         beforeSubmit.push(function() {

                setValue('addedDiagnosisCount.value', removeBlanks(1,44,"-list.value",1,false));
                setValue('addedSurgeryCount.value', removeBlanks(45,10,"-list.value",2,false));
                setValue('addedReferralsCount.value', removeBlanks(101,10,"-list.value",2,false));
                setValue('addedLabsCount.value', removeBlanks(201,10,"-list.value",1,false));
                setValue('addedDiagCount.value', removeBlanks(401,10,"-list.value",1,false));
                return true;
         }); 
     
		/***********************************************************
		  ==== Dylan's duration function ====
		  ensures that a duration pair has both a quantity and units
		 ***********************************************************/
		$j(document).ready(function(){
				var durationCount = $j(".duration").length;
				var index = 0;
				var durationCheck = true;

				$j(".duration").each(function(){
					index++;
					var group = $j(this);
					var id = index;
					beforeSubmit.push(function() {
    						var numeric = group.find("input[type$='text']:first").val();
						var dropdown = group.find("select:first").val();
						var errorID = group.find(".error:last").attr('id');
						clearError(errorID);

						if ((dropdown == '' &amp;&amp; numeric != '') || (dropdown != '' &amp;&amp; numeric =='')) {
						showError(errorID,'<br/>Need quantity and units');
							if (durationCheck) {
								group.find("select:first").focus();
								durationCheck = false;
							}
						}
						if (id == durationCount) {
							var ret = durationCheck;
							durationCheck = true;
							return ret;
						}
						return true;
					});
				});
		});

		$j(document).ready(function(){
				if ( $j.browser.msie ) {
				$j(":checkbox").click(function(){
					$j(this).change();
					});
				}
				$j(".enableDisable").each(function(){
					var group = $j(this);
					function disableFn(){
					group.children("#disabled").fadeTo(250,0.33);
					group.children("#disabled").find(":checkbox").attr("checked",false); //uncheck
					group.children("#disabled").find("input[type$='text']").val("");
					group.children("#disabled").find("textarea").val("");
					group.children("#disabled").find("select").val(0);
					group.children("#disabled").find("input").attr("disabled",true);  //disable
					group.children("#disabled").find("textarea").attr("disabled",true);
					group.children("#disabled").find("select").attr("disabled",true);
					}
					function enableFn(){
					group.children("#disabled").fadeTo(250,1);
					group.children("#disabled").find("input").attr("disabled",false);
					group.children("#disabled").find("select").attr("disabled",false);
					group.children("#disabled").find("textarea").attr("disabled",false);
					}
                                               <ifMode mode="ENTER" include="true">
						disableFn();
                                                </ifMode>
                                                <ifMode mode="VIEW" include="true">
						disableFn();
                                                </ifMode>
					$j(this).children("#trigger").find(":checkbox:first").change(function(){
						var checked = $j(this).attr("checked");
						if(checked == true){
						enableFn();
						}else{
                                                disableFn();
						}
						});
				});

				$j(".checkboxGroup").each(function(){
						var group = $j(this);
						var uncheckAll = function(){
						group.find("input[type$='checkbox']").attr("checked",false);
						group.find("input[type$='checkbox']").change();
						}
						var uncheckRadioAndAll = function(){
						group.find("#checkboxAll,#checkboxRadio").find("input[type$='checkbox']").attr("checked",false);
						group.find("#checkboxAll,#checkboxRadio").find("input[type$='checkbox']").change();
						}

						group.find("#checkboxAll").find("input").click(
							function(){
							var flip;
							var checked = $j(this).siblings(":checkbox:first").attr("checked");
							if($j(this).attr("name") == $j(this).parents("#checkboxAll:first").find(":checkbox:first").attr("name")){
							checked = $j(this).attr("checked");
							flip = checked;
							}else{
							flip = !checked;
							}
							if($j(this).attr("type") == "text") if(flip == false) flip = !flip; // this is so the user doesn't go to check the checkbox, then uncheck it when they 
							uncheckAll();
							$j(this).parents("#checkboxAll:first").find(":checkbox").attr("checked",flip);
							$j(this).parents("#checkboxAll:first").find(":checkbox").change();
							}
							);

						group.find("#checkboxRadio").find("input[type$='checkbox']").click(function(){
								uncheckAll();
								$j(this).siblings("input[type$='checkbox']").attr("checked",false);
								$j(this).attr("checked",true);
								$j(this).change();
								});

						group.find("#checkboxCheckbox").click(
								function(){
								uncheckRadioAndAll();
								}
								);
				});
		});
	}

</script>

<script type="text/javascript">
	function openGrowthChart() {
		var id ="<lookup expression="patient.patientId"/>";
		window.open('../growthchart/growthChart.htm?patientId=' + id, 'summaryWindow', 'toolbar=no,width=660,height=600,resizable=yes,scrollbars=yes').focus();
	}
</script>

	<macros>
	paperFormId = (Fill this in)
	headerColor =#009d8e
	fontOnHeaderColor = white
	</macros>

	<style>
		.section {
			border: 1px solid $headerColor;
			padding: 2px;
			text-align: left;
			margin-bottom: 1em;
		}
		.sectionHeader {
			background-color: $headerColor;
			color: $fontOnHeaderColor;
			display: block;
			padding: 2px;
			font-weight: bold;
		}

		.labelCol {	
			vertical-align: top;
			font-weight: bold;	
		}

		.secondary {
			padding-left: 10px;
		}
		.baseline-aligned td.label {
			text-align: right;
		}
		.right {
			float: right;
		}
		.karnofsky tr{
			width: 100%;
		}
		.karnofsky td{
			width: 50%;
		}
		.inner-table {
			width: 100%
		}
		.checkboxGroup {
			width: 100%;
		}
		#two-wide {
			width: 100%;
		}
		#two-wide tr {
			width: 100%;
		}
		#two-wide td {
			padding-left: 5px;
			padding-bottom: 5px;
			width: 50%;
			vertical-align: top;
			border: 1px solid $headerColor;
		}
		#two-wide td.enableDisable {
			border: none;
			width: auto;
			padding-right: 2px;
		}
		#two-wide td.nested-td {
			border: none;
			width: auto;
			padding-right: 2px;
		}
		#two-wide td.nested-label {
			border: none;
			width: auto;
			padding-right: 2px;
			text-align: right;
		}
		#three-wide {
			width: 100%
		}
		#three-wide tr {
			width: 100%;
		}
		#three-wide td {
			padding-left: 5px;
			width: 33%;
			vertical-align: top;
			border: 1px solid $headerColor;
		}

	</style>

<div style="float:right">Paper Form ID: $paperFormId</div>
<h2>KMRI Adult Intake Form (v1.0)</h2>

<section headerLabel="Contents">
<ol>
	<li><a href="#S1"> Encounter Details </a> </li>
	<li><a href="#S3"> Presenting Complaint </a> </li>
	<li><a href="#S4"> Review of Systems </a> </li>
	<li><a href="#S10"> Physical Exam </a> </li>
	<li><a href="#TestsRefs"> Tests and Referrals </a></li>
	<li><a href="#S11"> Impressions </a> </li>
</ol>
</section>

<span id="S1">
	<section headerLabel="Encounter Details">
	<table class="baseline-aligned">
		<tr>
			<td class="label">Date:</td>
			<td><encounterDate default="today"/></td>
		</tr>
		<tr>
			<td class="label">Location:</td>
			<td><encounterLocation default="UserProperty:defaultLocation"/></td>
		</tr>
		<tr>
			<td class="label">Provider:</td>
			<td><encounterProvider default="currentUser"/></td>
		</tr>
	</table>
	</section>
</span>


<span id="S3">
	<section headerLabel="Presenting Complaint">
	<table>
		<tr>
			<td style="padding-left:5px; padding-top:10px;">
				<obs field="PC_symptomatic" id="presentingComplaint" conceptId="5219" answerConceptIds="5006,1068" answerLabels="Feeling well,Having symptoms" style="radio"/>
				<br/>
				Chief Complaint: <obs field="PC_chiefComplaint" id="chiefComplaint" conceptId="5219" answerClasses="Chief Complaint" />
				<br/>

				Comments: 
				<div class="secondary"><obs field="PC_comments" id="secondary1" conceptId="161011" answerConceptId="5219" style="textarea" rows="8" cols="75"/></div>
			</td>
		</tr>
	</table>
	</section>
</span>

<span id="S4">
	<section headerLabel="Review of Systems">
	<table id="two-wide">
		<tr>
			<td class="checkboxGroup" colspan="2">
				<h4>General: </h4>
				<table class="checkboxGroup" style="width:auto;">
					<tr id="checkboxAll">
						<td class="nested-td">
							<obs field="R_noComplaints" id="noComplaints" conceptId="1069" answerConceptId="664" answerLabel="No complaints" style="checkbox"/>
						</td>
					</tr>
					<tr id="checkboxCheckbox">

						<td class="nested-td">
							<obs field="R_fever" id="fever" conceptId="1069" answerConceptId="140238" answerLabel="Fever" style="checkbox"/>
						</td>
						<td class="nested-td">
							<obs field="R_chills" id="chills" conceptId="1069" answerConceptId="871" answerLabel="Chills" style="checkbox"/>
						</td>
						<td class="nested-td">
							<obs field="R_nightSweats" id="nightSweats" conceptId="1069" answerConceptId="133027" answerLabel="Night sweats" style="checkbox"/>
						</td>
					</tr>
					<tr id="checkboxCheckbox">
						<td class="nested-td">
							<obs field="R_rash" id="rash" conceptId="1069" answerConceptId="512" answerLabel="Rash" style="checkbox"/>
						</td>
						<td class="nested-td">
							<obs field="R_fatigue" id="fatigue" conceptId="1069" answerConceptId="140501" answerLabel="Fatigue" style="checkbox"/>
						</td>
	
						<td class="nested-td">
							<obs field="R_pain" id="pain" conceptId="1069" answerConceptId="114403" answerLabel="Pain" style="checkbox"/>
						</td>
					</tr>
<tr id="checkboxCheckbox">
<td class="nested-td">

							<div class="enableDisable">
								<div id="trigger">
									<obs field="GENERAL_weightGain" conceptId="5544" answerConceptId="122887" answerLabel="Weight gain" style="checkbox"/> Weight Gain
								</div>
								<div id="disabled" class="secondary">
									<span class="duration">
										How much? <obs field="GENERAL_weightGainAmount" conceptId="5089" answerConceptId="5544"/> kg
									</span>
									<br/>
									<span class="duration">
										Over how long? <obs field="GENERAL_weightGainLength" conceptId="1731"/><obs field="GENERAL_weightGainLengthUnits" conceptId="1732" answerConceptIds="1072,1073,1074" answerLabels="Days,Weeks,Months" defaultValue="1072"/>
									</span>
								</div>
							</div>
						</td>
</tr>
				</table>
				<br/>
				Comments: 
				<div class="secondary"><obs field="R_comments" id="secondary2" conceptId="161011" answerconceptId="160538" style="textarea" rows="5" cols="50"/></div>
			</td>
		</tr>
		<tr>
			<td class="checkboxGroup">
				<h4>Gastrointestinal: </h4>
				<table class="checkboxGroup">
					<tr id="checkboxAll">
						<td class="nested-td">
							<obs field="GI_noComplaints" conceptId="1078" answerConceptId="664" answerLabel="No complaints" style="checkbox"/>
						</td>
					</tr>
					<tr id="checkboxCheckbox">
  					        <td class="nested-td">
							<obs field="GI_abdominal" conceptId="1078" answerConceptId="151" answerLabel="Abdominal pain" style="checkbox"/>
						</td>
						<td class="nested-td">
							<obs field="GI_appetite" conceptId="1078" answerConceptId="6031" answerLabel="Poor appetite" style="checkbox"/>
						</td>
						<td class="nested-td">
							<obs field="GI_jaundice" conceptId="1078" answerConceptId="5986" answerLabel="Hx of jaundice" style="checkbox"/>
						</td>
					</tr>

					<tr id="checkboxCheckbox">
						<obsgroup groupingConceptId="5978">
						<td class="enableDisable">
							<div id="trigger">	
								<obs field="GI_nausea" conceptId="1078" answerConceptId="5978" answerLabel="Nausea" style="checkbox"/>
							</div>
							<div id="disabled" class="secondary">
								<span class="duration">
									Duration: <obs field="GI_nauseaDuration" conceptId="1731"/><obs field="GI_nauseaDurationUnits" conceptId="5979"/>
								</span>
							</div>
						</td>
						</obsgroup>
						<obsgroup groupingConceptId="122983">
						<td class="enableDisable">
							<div id="trigger">
								<obs field="GI_vomiting" conceptId="1078" answerConceptId="122983" answerLabel="Vomiting" style="checkbox"/>
							</div>
							<div id="disabled" class="secondary">
								<span class="duration">
									Duration: <obs field="GI_vomitingDuration" conceptId="1731"/><obs field="GI_vomitingDurationUnits" conceptId="5981" />
								</span>
							</div>
						</td>
						</obsgroup>
					</tr>
					<tr>
						<obsgroup groupingConceptId="142412">
						<td class="enableDisable">
							<div id="trigger">
								<obs id="GI_diarrhea" field="GI_diarrhea" conceptId="1078" answerConceptId="142412" answerLabel="Diarrhea" style="checkbox"/>
							</div>
							<div id="disabled" class="secondary">
								<span class="duration">
									Duration: <obs field="GI_diarrheaDuration" conceptId="1731"/><obs field="GI_diarrheaDurationUnits" conceptId="5984" answerConceptIds="1822,1072,1073,1074" answerLabels="Hours,Days,Weeks,Months" defaultValue="1072"/>
								</span>
							</div>
						</td>
						</obsgroup>
						<obsgroup groupingConceptId="996">
						<td class="enableDisable">
							<div id="trigger">
								<obs id="GI_constipation" conceptId="1078" answerConceptId="996" answerLabel="Constipation" style="checkbox"/>
							</div>
							<div id="disabled" class="secondary">
								<span class="duration">
									Duration: <obs field="GI_constipationDuration" conceptId="1731"/><obs field="GI_constipationDurationUnits" conceptId="1732" />
								</span>
							</div>
						</td>
						</obsgroup>
					</tr>
				</table>
				<br/>
				Comments: 
				<div class="secondary"><obs field="GI_comments" conceptId="161011" answerconceptId="160541" style="textarea" rows="5" cols="50"/></div>
			</td>
			<td>
				<h4>Cardiopulmonary: </h4>
				<table class="checkboxGroup">
					<tr>
						<td class="nested-td">
							<obs field="CP_noComplaint" conceptId="1071" answerConceptId="664" answerLabel="No complaints" style="checkbox"/>
						</td>
					</tr>
					<tr id="checkboxCheckbox">
						<obsgroup groupingConceptId="143264">
						<td class="enableDisable">
							<div id="trigger">
								<obs field="CP_cough" conceptId="1071" answerConceptId="143264" answerLabel="Cough" style="checkbox"/>
							</div>
							<div id="disabled" class="secondary">
								<span class="duration">
									Duration: <obs field="CP_coughDuration" conceptId="1731"/><obs field="CP_coughDuration" conceptId="1732" />
								</span>

								<div class="enableDisable">
									<div id="trigger">
										<obs field="CP_productiveCough" conceptId="1071" answerConceptId="5957" answerLabel="Productive Cough" style="checkbox"/>
									</div>
									<div id="disabled" class="secondary">
										<obs field="CP_productiveCoughIsWhite" conceptId="5958" labelText="Quality: " answerConceptId="1075" answerLabel="White"/>
										<obs field="CP_productiveCoughIsPurulent" conceptId="5958" answerConceptId="1076" answerLabel="Purulent"/>
										<obs field="CP_productiveCoughIsBlood" conceptId="5958" answerConceptId="1077" answerLabel="Blood"/>
									</div>
								</div>
							</div>
						</td>
						</obsgroup>
						<obsgroup groupingConceptId="141600">
						<td class="enableDisable">
							<div id="trigger">
								<obs field="CP_short" conceptId="1071" answerConceptId="141600" answerLabel="Shortness of breath" style="checkbox"/>
							</div>
							<div id="disabled">
								<div class="secondary">
									<obs field="CP_shortRest" conceptId="1071" answerConceptId="5961" answerLabel="At rest" style="checkbox"/>
									<obs field="CP_shortExert" conceptId="1071" answerConceptId="5973" answerLabel="On exertion" style="checkbox"/>
								</div>
								<div class="secondary">
									<span class="duration">
										Duration: <obs field="CP_shortDuration" conceptId="1731"/><obs field="CP_shortDurationUnits" conceptId="5962" />
									</span>
								</div>
							</div>
						</td>
						</obsgroup>
					</tr>
					<tr id="checkboxCheckbox">
						<obsgroup groupingConceptId="120749">
						<td class="enableDisable" colspan="2">
							<div id="trigger"><obs field="CP_chestPain" conceptId="1071" answerConceptId="120749" answerLabel="Chest pain" style="checkbox"/></div>
							<table id="disabled" class="secondary">
								<tr>
									<td class="nested-td">
										<obs field="CP_chestPainRest" conceptId="1071" answerConceptId="155495" answerLabel="At rest" style="checkbox"/>
									</td>
									<td class="nested-td">
										<obs field="CP_chestPainExert" conceptId="1071" answerConceptId="153514" answerLabel="On exertion" style="checkbox"/>
									</td>
								</tr>
								<tr>
									<td class="nested-label">
										Duration: 
									</td>
									<td class="nested-td">
										<span class="duration">
											<obs field="CP_chestPainDuration" conceptId="1731"/><obs field="CP_chestPainDurationUnits" conceptId="5971" />
										</span>
									</td>
								</tr>
								<tr>
									<td class="nested-label">
										Location: 
									</td>
									<td class="nested-td">	
										<obs field="CP_chestSub" conceptId="5976" answerConceptId="5963" answerLabel="Substernal"/>
									</td>
									<td class="nested-td">			
										<obs field="CP_chestLeft" conceptId="5976" answerConceptId="5139" answerLabel="Left"/>
									</td>
									<td class="nested-td">			
										<obs field="CP_chestRight" conceptId="5976" answerConceptId="5141" answerLabel="Right"/>
									</td>
									<td class="nested-td">	
										<obs field="CP_chestAnterior" conceptId="5976" answerConceptId="540" answerLabel="Anterior"/>
									</td>
									<td class="nested-td">	
										<obs field="CP_chestPosterior" conceptId="5976" answerConceptId="541" answerLabel="Posterior"/>
									</td>
								</tr>

								<tr>
									<td class="nested-label">
										Quality: 
									</td>
									<td class="nested-td">	
										<obs field="CP_chestPleuritic" conceptId="909" answerConceptId="5972" answerLabel="Pleuritic"/>
									</td>
									<td class="nested-td">	
										<obs field="CP_chestSharp" conceptId="909" answerConceptId="762" answerLabel="Sharp"/>
									</td>
									<td class="nested-td">	
										<obs field="CP_chestPressure" conceptId="909" answerConceptId="705" answerLabel="Pressure"/>
									</td>
									<td class="nested-td">	
										<obs field="CP_chestBurning" conceptId="909" answerConceptId="146625" answerLabel="Burning"/>
									</td>
									<td class="enableDisable">
										<div id="trigger">
											<obs field="CP_chestRadiating" conceptId="909" answerConceptId="127949" answerLabel="Radiating"/>
										</div>
										<div id="disabled" class="secondary">
											<obs field="CP_chestRadiatingType" conceptId="909" answerConceptIds="5168,5169" answerLabels="Radiates to neck, Radiates to axillia"/>
										</div>	
									</td>
								</tr>
							</table>
						</td>
						</obsgroup>
					</tr>
					<tr id="checkboxCheckbox">
						<td class="nested-td">
							<obs field="CP_history" conceptId="1071" answerConceptId="664" answerLabel="History of pneumonia (past 2 years)" style="checkbox"/>
						</td>
						<td class="nested-td">
							<obs field="CP_heartFailure" conceptId="1071" labelText="Congestive Heart Failure: " answerConceptIds="159357,159358,159359,159360" answerLabels="NYHA Class I,NYHA Class II,NYHA Class III,NYHA Class IV"/>
						</td>
					</tr>
				</table>
				Comments: 
				<div class="secondary"><obs field="CP_secondaryWhatIsThisField" conceptId="161011" answerconceptId="160540" style="textarea" rows="5" cols="50"/></div>
			</td>
		</tr>
		<tr>
			<td class="checkboxGroup">
				<h4>HEENT: </h4>
				<table class="checkboxGroup">
					<tr id="checkboxAll">
						<td class="nested-td">
							<obs field="HEENT_noComplaints" conceptId="1070" answerConceptId="664" answerLabel="No complaints" style="checkbox"/>
						</td>
					</tr>
					<tr id="checkboxCheckbox">
						<td class="nested-td">
							<obs field="HEENT_vd" conceptId="1070" answerConceptId="5953" answerLabel="Vision difficulties" style="checkbox"/>
						</td>
						<td class="nested-td">
							<obs field="HEENT_hd" conceptId="1070" answerConceptId="861" answerLabel="Hearing difficulties" style="checkbox"/>
						</td>
						<td class="nested-td">
							<obs field="HEENT_oto" conceptId="1070" answerConceptId="873" answerLabel="Otorrhea" style="checkbox"/>
						</td>
						<td class="nested-td">
							<obs field="HEENT_rhino" conceptId="1070" answerConceptId="115403" answerLabel="Rhinorrhea" style="checkbox"/>
						</td>
						<td class="nested-td">
							<obs field="HEENT_sd" conceptId="1070" answerConceptId="5954" answerLabel="Swallowing difficulties" style="checkbox"/>
						</td>
						<td class="nested-td">
							<obs field="HEENT_os" conceptId="1070" answerConceptId="5244" answerLabel="Oral Sores" style="checkbox"/>
						</td>
						<td class="nested-td">
							<obs field="HEENT_oc" conceptId="1070" answerConceptId="5334" answerLabel="Oral Candidiasis" style="checkbox"/>
						</td>
					</tr>
				</table>
				<br/>
				Comments: 
				<div class="secondary"><obs field="HEENT_comments" conceptId="161011" answerconceptId="160539" style="textarea" rows="5" cols="50"/></div>
			</td>
			<td>
				<h4>Genitourinary: </h4>
				<table class="checkboxGroup">
					<tr id="checkboxAll">
						<td class="nested-td">
							<obs field="GU_noComplaints" conceptId="1080" answerConceptId="664" answerLabel="No complaints" style="checkbox"/>
						</td>
					</tr>
					<includeIf velocityTest="$patient.gender == 'F' ">

					<tr id="checkboxCheckbox">
						<obsgroup groupingConceptId="5993">
						<td class="nested-td">
							<div class="enableDisable">
								<div id="trigger">
									<obs field="GU_vaginal" conceptId="1080" answerConceptId="5993" answerLabel="Vaginal Discharge" style="checkbox"/>
								</div>
								<div class="secondary" id="disabled">
									<span class="duration">
										Duration: <obs field="GU_vaginalDuration" conceptId="1731"/><obs field="GU_vaginalDurationUnits" conceptId="5994" />
									</span>
								</div>
							</div>
						</td>
						</obsgroup>
						<td class="nested-td">
							<table>
								<tr>
									<td class="nested-label">
										Menstrual Cycle: 
									</td>
									<td class="nested-td">
										<table>
											<tr>
												<td class="nested-td">
													<obs field="GU_regular" conceptId="160596" answerConceptId="1115" answerLabel="Regular" style="checkbox"/>
												</td>
												<td class="nested-td">
													<obs field="GU_irregular" conceptId="160596" answerConceptId="1116" answerLabel="Irregular" style="checkbox"/>
												</td>
											</tr>
											<tr>
												<td class="nested-td">
													<obs field="GU_amenorrhea" conceptId="160575" answerConceptId="148989" answerLabel="Amenorrhea" style="checkbox"/>
												</td>
												<td class="nested-td">
													<obs field="GU_Oligomenorrhea" conceptId="160575" answerConceptId="114997" answerLabel="Oligomenorrhea" style="checkbox"/>
												</td>
												<td class="nested-td">
													<obs field="GU_Dysmenorrhea" conceptId="160575" answerConceptId="118794" answerLabel="Dysmenorrhea" style="checkbox"/>
												</td>
												<td class="nested-td">
													<obs field="GU_meno" conceptId="160575" answerConceptId="5990" answerLabel="Menopausal" style="checkbox"/>
												</td>
												<td class="nested-td">
													<obs field="GU_postmeno" conceptId="160575" answerConceptId="113928" answerLabel="Post-menopausal" style="checkbox"/>
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>
						</td>
					</tr>

					<tr id="checkboxCheckbox">
						<td class="nested-label">
							Last menstrual period: 
						</td>
						<td class="nested-td">
							<obs field="GU_lastPeriod" conceptId="1427"/>
						</td>
					</tr>
					</includeIf>

					<includeIf velocityTest="$patient.gender == 'M' ">
					<tr id="checkboxCheckbox">
						<obsgroup groupingConceptId="123529">
						<td class="nested-td">
							<div class="enableDisable">
								<div id="trigger">
									<obs field="GU_urethral" conceptId="1080" answerConceptId="123529" answerLabel="Urethral Discharge" style="checkbox"/>
								</div>
								<div class="secondary" id="disabled">
									<span class="duration">
										Duration: <obs field="GU_urethralDuration" conceptId="1731"/><obs field="GU_urethralDuration" conceptId="5996" />
									</span>
								</div>
							</div>
						</td>
						</obsgroup>
					</tr>
					<tr class="checkboxCheckbox">
						<td class="nested-td">
							<obs field="GU_circumcised" conceptId="145096" labelText="Circumcised" style="checkbox"/>
						</td>
					</tr>
					</includeIf>
				</table>
				<br/>
				Comments: 
				<div class="secondary"><obs field="GU_comments" conceptId="161011" answerconceptId="160542" style="textarea" rows="5" cols="50"/></div>
			</td>
		</tr>
		<tr>
			<td class="checkboxGroup">
				<h4>Musculoskeletal: </h4>
				<table class="checkboxGroup">
					<tr id="checkboxAll">
						<td class="nested-td">
							<obs field="MS_noComplaints" conceptId="1081" answerConceptId="664" answerLabel="No complaints" style="checkbox"/>
						</td>
					</tr>
					<tr id="checkboxCheckbox">
						<td class="nested-td">
							<obs field="MS_joint" conceptId="1081" answerConceptId="80" answerLabel="Joint pains" style="checkbox"/>
						</td>
						<td class="nested-td">
							<obs field="MS_swelling" conceptId="1081" answerConceptId="5312" answerLabel="Swelling of joints" style="checkbox"/>
						</td>
						<td class="nested-td">
							<obs field="MS_edema" conceptId="1081" answerConceptId="590" answerLabel="Edema of legs" style="checkbox"/>
						</td>
					</tr>
					<tr id="checkboxCheckbox">
						<td class="nested-td">
							<obs field="MS_pain" conceptId="1081" answerConceptId="133632" answerLabel="Muscle pain" style="checkbox"/>
						</td>
						<td class="nested-td">
							<obs field="MS_painLegs" conceptId="1081" answerConceptId="6035" answerLabel="Pain in legs / feet" style="checkbox"/>
						</td>
					</tr>
				</table>
				<br/>
				Comments: 
				<div class="secondary"><obs field="MS_comments" conceptId="161011" answerconceptId="160543" style="textarea" rows="5" cols="50"/></div>
			</td>
			<td class="checkboxGroup">
				<h4>Central Nervous System: </h4>
				<table class="checkboxGroup">
					<tr id="checkboxAll">
						<td class="nested-td">
							<obs field="CNS_noComplaints" conceptId="1082" answerConceptId="664" answerLabel="No complaints" style="checkbox"/>
						</td>
					</tr>
					<tr id="checkboxCheckbox">
						<td class="nested-td">
							<obs field="CNS_pares" conceptId="1082" answerConceptId="6004" answerLabel="Paresthesia" style="checkbox"/>
						</td>
						<td class="nested-td"> 
							<obs field="CNS_focal" conceptId="1082" answerConceptId="6005" answerLabel="Focal weakness" style="checkbox"/>
						</td>
						<td class="nested-td">
							<obs field="CNS_seizures" conceptId="1082" answerConceptId="206" answerLabel="Seizures" style="checkbox"/>
						</td>

					</tr>
					<tr id="checkboxCheckbox">
						<td class="nested-td">
							<obs field="CNS_depression" conceptId="1082" answerConceptId="207" answerLabel="Depression" style="checkbox"/>
						</td>
						<td class="nested-td">
							<obs field="CNS_confusion" conceptId="1082" answerConceptId="120345" answerLabel="Confusion" style="checkbox"/>
						</td>
						<td class="nested-td">
							<obs field="CNS_memory" conceptId="1082" answerConceptId="6037" answerLabel="Memory problems" style="checkbox"/>
						</td>
					</tr>

				</table>
				<br/>
				Comments: 
				<div class="secondary"><obs field="CNS_comments" conceptId="161011" answerconceptId="160544" style="textarea" rows="5" cols="50"/></div>
			</td>
		</tr>
	</table>
	</section>
</span>

<span id="S10">
	<section headerLabel="PHYSICAL EXAM">
	<h4>Vitals</h4>
                       
		<table style="width:100%;"><tr><td style="width:50%;">
					<table id="two-wide">
						<tr>
							<td class="nested-label">BP</td><td class="nested-td"><obs conceptId="5085" />/<obs conceptId="5086" /></td>
						</tr>
						<tr>
							<td class="nested-label">Pulse</td><td class="nested-td"><obs conceptId="5087" />rate/min </td>
						</tr>
						<tr>
							<td class="nested-label">Resp Rate</td><td class="nested-td"><obs conceptId="5242" /></td>
						</tr>
						<tr>
							<td class="nested-label">Temp</td><td class="nested-td"><obs conceptId="5088" />[C&#176;]</td>
						</tr>
						<tr>
							<td class="nested-label">Level of consciousness:</td><td class="nested-td"><obs answerConceptIds="1066,1067,1065" answerLabels="Alert,Unknown,Impaired" conceptId="110434" style="checkbox"></obs></td>
						</tr>
						<tr><td class="nested-label">Glasgow Coma Scale</td><td class="nested-td"><obs conceptId="160347"> </obs></td>

						</tr>
						<tr>
							<td class="nested-label">SpO2</td><td class="nested-td"><obs conceptId="5092" />% </td>
						</tr>
						<tr>
							<td class="nested-label">Wt</td><td class="nested-td"><obs conceptId="5089" />kg</td>
						</tr>
						<tr>
							<td class="nested-label">Height</td><td class="nested-td"><obs conceptId="5090" />cm </td>
						</tr>
						<tr>
							<td class="nested-label">Karnofsky Score</td><td class="nested-td"><obs conceptId="5283" />%</td>
						</tr>
					</table>
				</td><td style="width:50%;">

				<h4 style="text-align:top;">Karnofsky Score:</h4>
				<table style="width:100%;">
					<tr><td style="width:50%;"> 100% = Normal health</td><td style="width:50%;">50% = Disabled</td></tr>
					<tr><td style="width:50%;"> 90% = Minor Symptoms</td><td style="width:50%;">40% = Requires considerable assistance, medical care</td></tr>
					<tr><td style="width:50%;"> 80% = Normal Activity with some effort</td><td style="width:50%;">30% = Severely disabled, in hospital</td></tr>
					<tr><td style="width:50%;"> 70% = Unable to carry on normal activity, able to care for oneself</td><td style="width:50%;">20% = Very sick, active support needed</td></tr>
					<tr><td style="width:50%;"> 60% = Requires help with personal needs</td><td style="width:50%;">10% = Moribund (near death)</td></tr>
				</table>






			</td>
	</tr></table>


	<hr />
	<table id="two-wide" style="width:100%;">
		<tr><td style="width:50%;"><h4>General Exam</h4>
				<obs answerConceptId="5201" conceptId="1119" style="checkbox" answerLabel="Temporal wasting"> </obs><br /><br />
				Comments: <div class="secondary"><obs conceptId="161011" answerConceptId="1119" style="textarea" rows="5" cols="50"></obs></div>
			</td>
			<td class="checkboxGroup" style="width:50%;">
				<h4>Skin</h4>
				<span id="checkboxAll"><obs field="SKIN_normal" answerConceptId="1115" conceptId="1120" style="checkbox" answerLabel="Normal"> </obs></span>
				<span id="checkboxCheckbox" class="enableDisable">
					<span id="trigger"><obs field="SKIN_abnormal" answerConceptId="1116" conceptId="1120" style="checkbox" answerLabel="Abnormal"> </obs></span>
					<span id="disabled">
						<span id="checkboxCheckbox" class="enableDisable">
							<span id="trigger"><obs field="SKIN_rash" answerConceptId="512" conceptId="1120" style="checkbox" answerLabel="Rash"> </obs>
							</span>
							<span id="disabled">
								<obs field="SKIN_rashType" answerConceptIds="522,520,521,128047,123198,118731,123468,160639" conceptId="1120" style="checkbox" answerLabels="Maculopapular,Macule(s),Papule(s),Pustules,Vesicle,Eczema,Urticaria,Bulla(e)"> </obs>
							</span>
						</span>
						<obs field="SKIN_kap" answerConceptId="507" conceptId="1120" style="checkbox" answerLabel="Kaposi sarcoma"> </obs> 
						<obs field="SKIN_jaundice" answerConceptId="136443" conceptId="1120" style="checkbox" answerLabel="Jaundice"> </obs>			
<obs field="SKIN_ulcer" answerConceptId="112934" conceptId="1120" style="checkbox" answerLabel="Ulcer"> </obs>						
					</span>
				</span>
				<br /><br />Comments: <div class="secondary"><obs field="SKIN_comments" conceptId="161011" answerConceptId="1120" style="textarea" rows="5" cols="50"></obs></div>
			</td>
		</tr>
		<tr>
			<td class="checkboxGroup" style="width:50%;">
				<h4>Lymph Nodes</h4>
				<span id="checkboxAll"><obs field="LN_normal" answerConceptId="1115" conceptId="1121" style="checkbox" answerLabel="Normal"> </obs></span>
				<span id="checkboxCheckbox" class="enableDisable">
					<span id="trigger"><obs field="LN_abnormal" answerConceptId="1116" conceptId="1121" style="checkbox" answerLabel="Abnormal"> </obs></span>
					<span id="disabled">
						<obs field="LN_sub" answerConceptId="504" conceptId="1121" style="checkbox" answerLabel="submandibular"> </obs>
						<obs field="LN_cerv" answerConceptId="643" conceptId="1121" style="checkbox" answerLabel="cervical"> </obs>
						<obs field="LN_ingui" answerConceptId="506" conceptId="1121" style="checkbox" answerLabel="inguinal"> </obs>
						<obs field="LN_supra" answerConceptId="505" conceptId="1121" style="checkbox" answerLabel="supraclavicular"> </obs>
						<obs field="LN_axil" answerConceptId="5112" conceptId="1121" style="checkbox" answerLabel="axillary"> </obs>
						<obs field="LN_epit" answerConceptId="160679" conceptId="1121" style="checkbox" answerLabel="epitrochlear"> </obs>
					</span>
				</span><br /><br /> 
				Comments: <div class="secondary"><obs field="LN_comments" conceptId="161011" answerConceptId="1121"  style="textarea" rows="5" cols="50"></obs></div>
			</td>
			<td class="checkboxGroup"  style="width:50%;">
				<h4>HEENT</h4>
				<span id="checkboxAll"><obs field="PEHEENT_normal" answerConceptId="1115" conceptId="1122" style="checkbox" answerLabel="Normal"> </obs></span>
				<span id="checkboxCheckbox" class="enableDisable">
					<span id="trigger"><obs field="PEHEENT_abnormal" answerConceptId="1116" conceptId="1122" style="checkbox" answerLabel="Abnormal"> </obs></span>
					<span id="disabled">
						<br />
						<b>Eyes:</b>
						<obs field="PEHEENT_sclera" answerConceptId="5192" conceptId="1122" style="checkbox" answerLabel="Sclera icteric"> </obs>
						<obs field="PEHEENT_conjunct" answerConceptId="516" conceptId="1122" style="checkbox" answerLabel="Conjunctiva pale"> </obs>
						<obs field="PEHEENT_fundal" answerConceptId="518" conceptId="1122" style="checkbox" answerLabel="Fundal abnormality"> </obs>
						<br />
						<b>Ears:</b>
						<obs field="PEHEENT_cerumen" answerConceptId="530" conceptId="1122" style="checkbox" answerLabel="Cerumen impaction"> </obs>
						<obs field="PEHEENT_tm" answerConceptId="948" conceptId="1122" style="checkbox" answerLabel="TM injected"> </obs>
						<br />
						<b>Neck:</b>
						<obs field="PEHEENT_trachea" answerConceptId="513" conceptId="1122" style="checkbox" answerLabel="Trachea deviated"> </obs>
						<obs field="PEHEENT_nuchal" answerConceptId="5170" conceptId="1122" style="checkbox" answerLabel="Nuchal rigidity"> </obs>
						<br />
						<b>Oropharynx:</b>
						<obs field="PEHEENT_thrush" answerConceptId="5334" conceptId="1122" style="checkbox" answerLabel="Thrush"> </obs>
						<obs field="PEHEENT_kaposi_sarcoma" answerConceptId="644" conceptId="1122" style="checkbox" answerLabel="Kaposi Sarcoma"> </obs>
						<obs field="PEHEENT_poor" answerConceptId="147999" conceptId="1122" style="checkbox" answerLabel="Poor dentition"> </obs>
                                                <obs field="PEHEENT_ulcers" answerConceptId="160614" conceptId="1122" style="checkbox" answerLabel="Ulcers and rash"> </obs><br /><b>Tonsils: </b>
                                                <obs field="PEHEENT_enlarged" answerConceptId="536" conceptId="1122" style="checkbox" answerLabel="Enlarged" />
                                                 <obs field="PEHEENT_erythe" answerConceptId="535" conceptId="1122" style="checkbox" answerLabel="Erythematous" />
                                                 <obs field="PEHEENT_exudate" answerConceptId="537" conceptId="1122" style="checkbox" answerLabel="Exudate" />



						<br />	
					</span>
				</span><br />
				Comments: <div class="secondary"><obs field="PEHEENT_comments" conceptId="161011" answerConceptId="160612" style="textarea" rows="5" cols="50"></obs></div>
			</td>
		</tr>
		<tr>
			<td class="checkboxGroup" style="width:50%;">
				<h4>Chest</h4>
				<span id="checkboxAll"><obs field="CHEST_normal" answerConceptId="1115" conceptId="1123" style="checkbox" answerLabel="Normal"> </obs></span>
				<span id="checkboxCheckbox" class="enableDisable">
					<span id="trigger"><obs field="CHEST_abnormal" answerConceptId="1116" conceptId="1123" style="checkbox" answerLabel="Abnormal"> </obs></span>
					<span id="disabled">
						<br />
						<b>Percussion:</b>
						<obs field="CHEST_dull" answerConceptId="5138" conceptId="1123" style="checkbox" answerLabel="Dullness"> </obs>
						<br />
                                                <b>Accessory Muscle Use:</b>
					        <obs field="CHEST_amu" answerConceptId="159441" conceptId="1123" style="checkbox" answerLabel="Accessory Muscle Use"> </obs>
						<br />
						<b>Auscultation:</b>
						<obs field="CHEST_diminished" answerConceptId="5115" conceptId="1123" style="checkbox" answerLabel="Breath sounds diminished"> </obs>
						<obs field="CHEST_bronchial" answerConceptId="5116" conceptId="1123" style="checkbox" answerLabel="Bronchial breath sounds"> </obs>
						<obs field="CHEST_ronchi" answerConceptId="5181" conceptId="1123" style="checkbox" answerLabel="Rhonchi"> </obs>
<br/>
						<obs field="CHEST_wheezes" answerConceptId="5209" conceptId="1123" style="checkbox" answerLabel="Wheezes"> </obs>
						<obs field="CHEST_crepitations" answerConceptId="5127" conceptId="1123" style="checkbox" answerLabel="Crepitations"> </obs>
<br/><b>Lung Finding:</b>
<obs field="CHEST_LUNGfinding" conceptId="159370"/>
						<br />
					</span>
				</span>
				<br />
				Comments: <div class="secondary"><obs field="CHEST_comments" conceptId="161011" answerConceptId="1123" style="textarea" rows="5" cols="50"></obs></div>
			</td>
			<td class="checkboxGroup" style="width:50%;">
				<h4>Heart</h4>
				<span id="checkboxAll"><obs field="HEART_normal" answerConceptId="1115" conceptId="1124" style="checkbox" answerLabel="Normal"> </obs></span>
				<span id="checkboxCheckbox" class="enableDisable">
					<span id="trigger"><obs field="HEART_abnormal" answerConceptId="1116" conceptId="1124" style="checkbox" answerLabel="Abnormal"> </obs></span>
					<span id="disabled">
						<br />
						<span id="checkboxCheckbox" class="enableDisable">
							<span id="trigger"><obs field="HEART_evidence" answerConceptId="5158" conceptId="1124" style="checkbox" answerLabel="Evidence for enlargement:"> </obs></span>
							<span id="disabled">
								<obs field="HEART_lv" answerConceptId="5156" conceptId="1124" style="checkbox" answerLabel="LV lift"> </obs>
								<obs field="HEART_rv" answerConceptId="5157" conceptId="1124" style="checkbox" answerLabel="RV lift"> </obs>
								<br />
							</span>
						</span>
						<span id="checkboxCheckbox" class="enableDisable">
							<span id="trigger"><obs field="HEART_sounds" answerConceptId="1117" conceptId="1124" style="checkbox" answerLabel="Abnormal Sounds:"> </obs></span>
							<span id="disabled">
								<obs field="HEART_s3" answerConceptId="550" conceptId="1124" style="checkbox" answerLabel="S3"> </obs>
								<obs field="HEART_s4" answerConceptId="551" conceptId="1124" style="checkbox" answerLabel="S4"> </obs>
								<obs field="HEART_friction" answerConceptId="130560" conceptId="1124" style="checkbox" answerLabel="Pericardial friction rub"> </obs>
								<br />
							</span>
						</span>
						<span id="checkboxCheckbox" class="enableDisable">
							<span id="trigger"><obs field="HEART_murmurs" answerConceptId="139063" conceptId="1124" style="checkbox" answerLabel="Murmurs:"> </obs></span>
							<span id="disabled">
								<obs field="HEART_systolic" answerConceptId="5166" conceptId="1124" style="checkbox" answerLabel="Systolic Ejection Murmur"> </obs>
								<obs field="HEART_holosystolic" answerConceptId="5162" conceptId="1124" style="checkbox" answerLabel="Holosystolic Murmur"> </obs>
								<obs field="HEART_diastolicDecrescendo" answerConceptId="5160" conceptId="1124" style="checkbox" answerLabel="Diastolic Decrescendo"> </obs>
								<obs field="HEART_rumble" answerConceptId="5164" conceptId="1124" style="checkbox" answerLabel="Diastolic Rumble"> </obs><br />
								<br />
							</span>
						</span>
					</span>
				</span>
				<br />
				Comments: <div class="secondary"><obs field="HEART_comments" conceptId="161011" answerConceptId="1124" style="textarea" rows="5" cols="50"></obs></div>
			</td>

		</tr>
		<tr>
			<td class="checkboxGroup" style="width:50%;">
				<h4>Abdomen</h4>
				<span id="checkboxAll"><obs field="ABDOMEN_normal" answerConceptId="1115" conceptId="1125" style="checkbox" answerLabel="Normal"> </obs></span>
				<span id="checkboxCheckbox" class="enableDisable">
					<span id="trigger"><obs field="ABDOMEN_abnormal" answerConceptId="1116" conceptId="1125" style="checkbox" answerLabel="Abnormal"> </obs></span>
					<span id="disabled">
						<br />
						<span id="checkboxCheckbox" class="enableDisable">
							<span id="trigger"><obs field="ABDOMEN_tender" answerConceptId="5105" conceptId="1125" style="checkbox" answerLabel="Tender to palpation"> </obs></span>
							<span id="disabled">
								(<obs field="ABDOMEN_leftup" answerConceptId="160380" conceptId="1125" style="checkbox" answerLabel="Left Upper Quadrant"> </obs>
								<obs field="ABDOMEN_leftlow" answerConceptId="5104" conceptId="1125" style="checkbox" answerLabel="Left Lower Quadrant"> </obs>
								<obs field="ABDOMEN_rightup" answerConceptId="5107" conceptId="1125" style="checkbox" answerLabel="Right Upper Quadrant"> </obs>
								<obs field="ABDOMEN_rightlow" answerConceptId="160381" conceptId="1125" style="checkbox" answerLabel="Right Lower Quadrant"> </obs>
								<obs field="ABDOMEN_epigas" answerConceptId="5099" conceptId="1125" style="checkbox" answerLabel="Epigastric"> </obs>
								<obs field="ABDOMEN_suprapub" answerConceptId="575" conceptId="1125" style="checkbox" answerLabel="Suprapubic"> </obs>
								<obs field="ABDOMEN_leftflank" answerConceptId="140070" conceptId="1125" style="checkbox" answerLabel="Flank Pain"> </obs>
								<obs field="ABDOMEN_periumbilicial" answerConceptId="124998" conceptId="1125" style="checkbox" answerLabel="Periumbilical"> </obs>
								)<br />
							</span>
						</span>
						<obs field="ABDOMEN_ascites" answerConceptId="148346" conceptId="1125" style="checkbox" answerLabel="Ascites"> </obs>
						<obs field="ABDOMEN_mass" answerConceptId="5103" conceptId="1125" style="checkbox" answerLabel="Mass"> </obs>
						<span id="checkboxCheckbox" class="enableDisable">
							<span id="trigger"><obs field="ABDOMEN_hepatome" answerConceptId="5008" conceptId="1125" style="checkbox" answerLabel="Hepatomegaly"> </obs></span>
							<span id="disabled">
								<obs field="ABDOMEN_cmbelow" conceptId="159447"> </obs>(cm below costal margin)
								<br />
							</span>
						</span>
						<span id="checkboxCheckbox" class="enableDisable">
							<span id="trigger"><obs field="ABDOMEN_splenomegaly" answerConceptId="5009" conceptId="1125" style="checkbox" answerLabel="Splenomegaly"> </obs></span>
							<span id="disabled">
								<obs field="ABDOMEN_cmbelowsplen" conceptId="159448"> </obs>(cm below costal margin)
								<br />
							</span>
						</span>

					</span>
				</span>
				<br />Comments: <div field="ABDOMEN_comments" class="secondary"><obs conceptId="161011" answerConceptId="1125" style="textarea" rows="5" cols="50"></obs></div>
			</td>
			<td class="checkboxGroup" style="width:50%;">
				<h4>Urogenital</h4>
				<span id="checkboxRadio"><obs field="UG2_normal" answerConceptId="1115" conceptId="1126" style="checkbox" answerLabel="Normal"> </obs>
					<obs field="UG2_abnormal" answerConceptId="1116" conceptId="1126" style="checkbox" answerLabel="Abnormal"> </obs>
					<obs field="UG2_notDone" answerConceptId="1118" conceptId="1126" style="checkbox" answerLabel="Not Done"> </obs>
				</span>
				<br /><br />Comments:  <div class="secondary"><obs field="UG2_comments" conceptId="161011" answerConceptId="1126" style="textarea" rows="5" cols="50"></obs></div>
			</td>
		</tr>
		<tr>
			<td class="checkboxGroup" style="width:50%;">
				<h4>Extremities</h4>
				<span id="checkboxAll"><obs field="EXT_normal" answerConceptId="1115" conceptId="1127" style="checkbox" answerLabel="Normal"> </obs></span>
				<span id="checkboxCheckbox" class="enableDisable">
					<span id="trigger"><obs field="EXT_abnormal" answerConceptId="1116" conceptId="1127" style="checkbox" answerLabel="Abnormal"> </obs></span>
					<span id="disabled">
						<obs field="EXT_edema" answerConceptId="590" conceptId="1127" style="checkbox" answerLabel="Edema"></obs>
						<obs field="EXT_leg" answerConceptId="111725" conceptId="1127" style="checkbox" answerLabel="Leg Ulcers"></obs>
						<obs field="EXT_cell" answerConceptId="134" conceptId="1127" style="checkbox" answerLabel="Cellulitis"> </obs>
						<obs field="EXT_kaposi" answerConceptId="507" conceptId="1127" style="checkbox" answerLabel="Kaposi sarcoma"></obs>
					</span>
				</span>
				<br /><br />Comments:  <div class="secondary"><obs field="EXT_comments" conceptId="161011" answerConceptId="1127" style="textarea" rows="5" cols="50"></obs></div>
			</td>
			<td style="width:50%;" class="checkboxGroup">
				<h4>Musculoskeletal</h4>
				<span id="checkboxAll"><obs conceptId="1128" answerConceptId="1115" style="checkbox" answerLabel="Normal" field="MS21"/></span>
				<span id="checkboxCheckbox"><obs conceptId="1128" answerConceptId="1116" style="checkbox" answerLabel="Abnormal" field="MS22"/>
				<obs conceptId="1128" answerConceptId="5312" style="checkbox" answerLabel="Joint Swelling" field="MS23"/>
				<obs conceptId="1128" answerConceptId="5313" style="checkbox" answerLabel="Muscle Tenderness" field="MS24"/></span>
				<br /><br />Comments:  <div class="secondary"><obs field="MS2_comment" conceptId="161011" answerConceptId="1128" style="textarea" rows="5" cols="50"></obs></div>
			</td>
		</tr>
		<tr>
			<td class="checkboxGroup" style="width:50%;">
				<h4>Neurologic</h4>
				<span id="checkboxAll"><obs field="NL2_normal" answerConceptId="1115" conceptId="1129" style="checkbox" answerLabel="Normal"> </obs></span>
				<span id="checkboxCheckbox" class="enableDisable">
					<span id="trigger"><obs field="NL2_abnormal" answerConceptId="1116" conceptId="1129" style="checkbox" answerLabel="Abnormal"> </obs></span>
					<span id="disabled">
						<obs field="NL2_cranial" answerConceptId="599" conceptId="1129" style="checkbox" answerLabel="Cranial nerve abnormality"></obs>
						<obs field="NL2_lower" answerConceptId="5135" conceptId="1129" style="checkbox" answerLabel="Decreased sensation in extremities"></obs>
						<obs field="NL2_gait" answerConceptId="5108" conceptId="1129" style="checkbox" answerLabel="Abnormal gait"> </obs>
						<obs field="NL2_focal" answerConceptId="6005" conceptId="1129" style="checkbox" answerLabel="Focal weakness"> </obs>
					</span>
				</span><br /><br />Comments:   <div class="secondary"><obs field="NL2_comments" conceptId="161011" answerConceptId="1129" style="textarea" rows="5" cols="50"></obs></div>
			</td>
			<td class="checkboxGroup" style="width:50%;">
				<h4>Psychiatric</h4>
				<span id="checkboxAll"><obs field="PSYCH_normal" answerConceptId="1115" conceptId="1130" style="checkbox" answerLabel="Normal"> </obs></span>
				<span id="checkboxCheckbox" class="enableDisable">
					<span id="trigger"><obs field="PSYCH_abnormal" answerConceptId="1116" conceptId="1130" style="checkbox" answerLabel="Abnormal"> </obs></span>


					<span id="disabled">
						<obs field="PSYCH_depressed" answerConceptId="119537" conceptId="1130" style="checkbox" answerLabel="Depressed"></obs>
						<obs field="PSYCH_confused" answerConceptId="120345" conceptId="1130" style="checkbox" answerLabel="Confused"> </obs>
<obs field="PSYCH_psychosis" answerConceptId="113517" conceptId="1130" style="checkbox" answerLabel="Psychosis"> </obs>
<obs field="PSYCH_anxiety" answerConceptId="121543" conceptId="1130" style="checkbox" answerLabel="Anxiety"> </obs>
<obs field="PSYCH_manic" answerConceptId="115926" conceptId="1130" style="checkbox" answerLabel="Manic"> </obs>
<obs field="PSYCH_suicidal" answerConceptId="158978" conceptId="1130" style="checkbox" answerLabel="Suicidal"> </obs>
					</span>
				</span>
				<br /><br />Comments:  <div class="secondary"><obs field="PSYCH_comments" conceptId="161011" answerConceptId="1130" style="textarea" rows="5" cols="50"></obs></div>
			</td>
		</tr>
	</table>
	</section>
</span>


<span id="TestsRefs">

<section headerLabel="Tests and Referrals">
	<table>
		<tr>
<h4> Tests Ordered</h4>
<td><repeat>
				<template>
 				<table>
					<tr id="{n}-toggleContainer" style="display:none;">
					
							<td class="nested-td">
<obs id="{n}-list" field="LAB_{n}" conceptId="1271" answerClasses="KMRI_Labs" showCommentField="true" style="dropdown"/>
							</td>
							<td class="nested-td"><button id="{n}-addEntry" class="addEntry">Add</button><button id="{n}-removeEntry" class="removeEntry">Remove</button></td>
						</tr>
					</table>
				</template>
                                <render n="201"/>
				<render n="202"/>
				<render n="203"/>
				<render n="204"/>
				<render n="205"/>
				<render n="206"/>
				<render n="207"/>
				<render n="208"/>
				<render n="209"/>
				<render n="210"/>
				</repeat></td>




<!--     another for radiology,  n=301-310     -->
</tr><tr>
<td>

					<h4>Referrals Made:</h4>

	<repeat>
				<template>
 				<table>
					<tr id="{n}-toggleContainer" style="display:none;">
					
							<td class="nested-td">
							Referral:<obs id="{n}-list" field="REFER_{n}" conceptId="1272" style="dropdown"/><br/>
                                                        Location: <obs id="{n}-list" field="REFER_loc{n}" conceptId = "1272" answerClasses="KMRI_Locations" style="dropdown" showCommentField="true" />
							</td>
							<td class="nested-td"><button id="{n}-addEntry" class="addEntry">Add</button><button id="{n}-removeEntry" class="removeEntry">Remove</button></td>
						</tr>
					</table>
				</template>
                                <render n="101"/>
				<render n="102"/>
				<render n="103"/>
				<render n="104"/>
				<render n="105"/>
				<render n="106"/>
				<render n="107"/>
				<render n="108"/>
				<render n="109"/>
				<render n="110"/>
				</repeat>
</td>
			</tr>
		</table>

		</section>
</span>

<span id="S11">	
	<section headerLabel="Impressions">

<br />

<b>Reportable Diagnoses:</b>
            
<obsgroup groupingConceptId="161602">
				<repeat>
				<template>
 				<table>
					<tr id="{n}-toggleContainer" style="display:none;">
							<td class="nested-td">
							<obs id="{n}-list" field="REPDIAG_{n}" conceptId="6042" answerClasses="RequiredDiagnosis" showCommentField="true" style="dropdown"/>
							</td>
							<td class="nested-td"><button id="{n}-addEntry" class="addEntry">Add</button><button id="{n}-removeEntry" class="removeEntry">Remove</button></td>
						</tr>
					</table>
				</template>
				<render n="1"/>
				<render n="2"/>
				<render n="3"/>
				<render n="4"/>
				<render n="5"/>
				<render n="6"/>
				<render n="7"/>
				<render n="8"/>
				<render n="9"/>
				<render n="10"/>
				<render n="11"/>
				<render n="12"/>
				<render n="13"/>
				<render n="14"/>
				<render n="15"/>
				<render n="16"/>
				<render n="17"/>
				<render n="18"/>
				<render n="19"/>
				<render n="20"/>
				<render n="21"/>
				<render n="22"/>
				<render n="23"/>
				<render n="24"/>
				<render n="25"/>
				<render n="26"/>
				<render n="27"/>
				<render n="28"/>
				<render n="29"/>
				<render n="30"/>
				<render n="31"/>
				<render n="32"/>
				<render n="33"/>
				<render n="34"/>
				<render n="35"/>
				<render n="36"/>
				<render n="37"/>
				<render n="38"/>
				<render n="39"/>
				<render n="40"/>
				<render n="41"/>
				<render n="42"/>
				<render n="43"/>
				<render n="44"/>
				</repeat>
		</obsgroup>

<span id="test"> 

<b> Diagnoses: </b>
<repeat>
				<template>
 				<table>
					<tr id="{n}-toggleContainer" style="display:none;">
							<td class="nested-td">
							<obs id="{n}-list" field="DIAG_{n}" conceptId="6042" answerClasses="RequiredDiagnosis, Diagnosis, Finding, Anatomy, Question, ConvSet, Misc, Symptom, Symptom/Finding, Specimen, Aggregate Measurement, Indicator, Health Care Monitoring Topics, Radiology/Imaging Procedure, Chief Complaint" showCommentField="true" style="autocomplete"/>
							</td>
							<td class="nested-td"><button id="{n}-addEntry" class="addEntry">Add</button><button id="{n}-removeEntry" class="removeEntry">Remove</button></td>
						</tr>
					</table>
				</template>
				<render n="401"/>
				<render n="402"/>
				<render n="403"/>
				<render n="404"/>
				<render n="405"/>
				<render n="406"/>
				<render n="407"/>
				<render n="408"/>
				<render n="409"/>
				<render n="410"/>

				</repeat>


</span>


        <div id="patid" style="display:none;"><lookup expression="patient.id"/></div> 
<br />
	Comments:  <div class="secondary"> <obs field="REPORTABLE_comments" conceptId="161011"  style="textarea" rows="5" cols="50"></obs></div>		

	<br />

	<div>
		Next scheduled Appointment Date?
		<obs  conceptId="5096" allowFutureDates="true"> </obs>
	</div>
	</section>

	</span>

	<!-- Hidden concepts for add/remove sections -->
	<span id="testspan" style="display:none;">
		<obs id="addedDiagnosisCount" conceptId="161649" />
                <obs id="addedSurgeryCount" conceptId="161648" />
                <obs id="addedReferralsCount" conceptId="161652"/>
                <obs id="addedDiagCount" conceptId="161737"/>
                <obs id="addedLabsCount" conceptId="161738"/>
	</span>

	<!-- TRAVIS' FUNCTION -->
<script type="text/javascript">
function openImpressions(){
var url = "/openmrs/module/impressions/impressionList.list\?nw=1\u0026patientId=" + document.getElementById('patid').innerHTML.trim();
window.open(url );
}

	if (jQuery){
	$j(document).ready(function() {
                //
                // find the count of the number of reported diagnoses that exist
                //		
                displayRows(addedDiagnosisCount,"addedDiagnosisCount.value",1);
                displayRows(addedSurgeryCount,"addedSurgeryCount.value",45);
                displayRows(addedReferralsCount,"addedReferralsCount.value",101);
                displayRows(addedLabsCount,"addedLabsCount.value",201);
                displayRows(addedDiagCount,"addedDiagCount.value",401);

	});
	}
</script>
    
        <ifMode mode="VIEW">
        <script type="text/javascript">
	if(jQuery){

		$j(document).ready(function(){
             // if this is in View, don't want any addEntry or remove Entry buttons 
                     for (i=1;500>=i;++i) {
                          $j('#' + i + '-removeEntry').toggle(false);
                          $j('#' + i + '-addEntry').toggle(false);
                     };
                 });
        };
        </script>
    </ifMode>


	<submit/>
</htmlform>